(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{20:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var n=r(668);class i extends Error{code;params;wrappedErrors;constructor(e,t,...r){e instanceof Array||(r=(void 0===t?[]:[t]).concat(r),t=e,e=[]),super(t),this.code=t||"E_UNEXPECTED",this.params=r,this.wrappedErrors=e,this.name=this.toString(),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}static wrap(e,t,...r){let n=a(e.message),s=("wrappedErrors"in e?e.wrappedErrors:[]).concat(e);return t||(t=n?e.message:"E_UNEXPECTED"),e.message&&!n&&r.push(e.message),new i(s,t,...r)}static cast(e,t,...r){return s(e)?e:i.wrap(e,t,...r)}static bump(e,t,...r){return s(e)?i.wrap(e,e.code,...e.params):i.wrap(e,t,...r)}toString(){return(this.wrappedErrors.length?this.wrappedErrors[this.wrappedErrors.length-1].stack+n.EOL:"")+this.constructor.name+": "+this.code+" ("+this.params.join(", ")+")"}}function s(e){return e instanceof i||!!(e.constructor&&e.constructor.name&&e.constructor.name.endsWith("Error")&&"code"in e&&"string"==typeof e.code&&a(e.code)&&"params"in e&&e.params&&e.params instanceof Array)}function a(e){return/^([A-Z0-9_]+)$/.test(e)}},668:e=>{!function(){"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="//");var t={};t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"},e.exports=t}()},1865:(e,t,r)=>{"use strict";let n,i,s,a,o;r.d(t,{xw:()=>eM});var l,u={};r.r(u),r.d(u,{CV:()=>S,b0:()=>p,vA:()=>h,Ms:()=>v,xA:()=>m,$L:()=>g,pX:()=>y,lO:()=>I,Ho:()=>x,ux:()=>f,xq:()=>d,qj:()=>b,rE:()=>A});let c={};for(let e=0;e<128;e++)c[e]=String.fromCharCode(e);function p(e){let t=e||"";return function(){throw Error("this method "+t+" is abstract! (it has no implementation in class "+this.constructor.name+")")}}function h(e,t){if(!e)throw Error(t||"Assertion failed")}function m(e,t,r){let n;Object.defineProperty(e,t,{get(){return n||(n=r.call(this)),n}})}function d(e,t){return Array(t+1).join(e)}function f(e,t){var r=()=>e,n=t;let i=[];for(;n-- >0;)i.push(r());return i}function g(e){let t=[];for(let r=0;r<e.length;r++){let n=e[r];e.lastIndexOf(n)!==r&&0>t.indexOf(n)&&t.push(n)}return t}function v(e){let t=[];return e.forEach(e=>{0>t.indexOf(e)&&t.push(e)}),t}function I(e){let t=e[0];return t===t.toUpperCase()}function y(e){return!I(e)}function x(e,t,r){return e.length<t?d(r||" ",t-e.length)+e:e}function S(){this.strings=[]}c[39]="\\'",c[34]='\\"',c[92]="\\\\",c[8]="\\b",c[12]="\\f",c[10]="\\n",c[13]="\\r",c[9]="\\t",c[11]="\\v",S.prototype.append=function(e){this.strings.push(e)},S.prototype.contents=function(){return this.strings.join("")};let _=e=>String.fromCodePoint(parseInt(e,16));function b(e){if("\\"!==e.charAt(0))return e;switch(e.charAt(1)){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"	";case"v":return"\v";case"x":return _(e.slice(2,4));case"u":return"{"===e.charAt(2)?_(e.slice(3,-1)):_(e.slice(2,6));default:return e.charAt(1)}}function A(e){if(null==e)return String(e);let t=Object.prototype.toString.call(e);try{let r;return(e.constructor&&e.constructor.name?e.constructor.name:0===t.indexOf("[object ")?t.slice(8,-1):typeof e)+": "+JSON.stringify(String(e))}catch(e){return t}}let w={Lu:/\p{Lu}/u,Ll:/\p{Ll}/u,Lt:/\p{Lt}/u,Lm:/\p{Lm}/u,Lo:/\p{Lo}/u,Nl:/\p{Nl}/u,Nd:/\p{Nd}/u,Mn:/\p{Mn}/u,Mc:/\p{Mc}/u,Pc:/\p{Pc}/u,Zs:/\p{Zs}/u,L:/\p{Letter}/u,Ltmo:/\p{Lt}|\p{Lm}|\p{Lo}/u};class N{constructor(){if(this.constructor===N)throw Error("PExpr cannot be instantiated -- it's abstract")}withSource(e){return e&&(this.source=e.trimmed()),this}}let O=Object.create(N.prototype),L=Object.create(N.prototype);class R extends N{constructor(e){super(),this.obj=e}}class F extends N{constructor(e,t){super(),this.from=e,this.to=t,this.matchCodePoint=e.length>1||t.length>1}}class E extends N{constructor(e){super(),this.index=e}}class P extends N{constructor(e){super(),this.terms=e}}class C extends P{constructor(e,t,r){super([r,e.rules[t].body]),this.superGrammar=e,this.name=t,this.body=r}}class k extends P{constructor(e,t,r,n){super([...r,e.rules[t].body,...n]),this.superGrammar=e,this.ruleName=t,this.expansionPos=r.length}}class T extends N{constructor(e){super(),this.factors=e}}class D extends N{constructor(e){super(),this.expr=e}}class j extends D{}class M extends D{}class G extends D{}j.prototype.operator="*",M.prototype.operator="+",G.prototype.operator="?",j.prototype.minNumMatches=0,M.prototype.minNumMatches=1,G.prototype.minNumMatches=0,j.prototype.maxNumMatches=Number.POSITIVE_INFINITY,M.prototype.maxNumMatches=Number.POSITIVE_INFINITY,G.prototype.maxNumMatches=1;class q extends N{constructor(e){super(),this.expr=e}}class B extends N{constructor(e){super(),this.expr=e}}class U extends N{constructor(e){super(),this.expr=e}}class $ extends N{constructor(e,t=[]){super(),this.ruleName=e,this.args=t}isSyntactic(){return I(this.ruleName)}toMemoKey(){return this._memoKey||Object.defineProperty(this,"_memoKey",{value:this.toString()}),this._memoKey}}class V extends N{constructor(e){super(),this.category=e,this.pattern=w[e]}}function z(e,t){let r;return t?((r=Error(t.getLineAndColumnMessage()+e)).shortMessage=e,r.interval=t):r=Error(e),r}function K(){return z("Interval sources don't match")}function H(e,t,r){return z("Rule "+e+" is not declared in grammar "+t,r)}function W(e,t,r,n){let i="Duplicate declaration for rule '"+e+"' in grammar '"+t+"'";return t!==r&&(i+=" (originally declared in '"+r+"')"),z(i,n)}function J(e,t,r,n){return z("Wrong number of parameters for rule "+e+" (expected "+t+", got "+r+")",n)}function Q(e,t,r){return z("Duplicate parameter names in rule "+e+": "+t.join(", "),r)}function Z(e,t){return z("Incorrect argument type: expected "+e,t.source)}function X(e,t){let r=t.length>0?t[t.length-1].args:[],n="Nullable expression "+e.expr.substituteParams(r)+" is not allowed inside '"+e.operator+"' (possible infinite loop)";return t.length>0&&(n+="\nApplication stack (most recent application last):\n"+t.map(e=>new $(e.ruleName,e.args)).join("\n")),z(n,e.expr.source)}function Y(e,t,r,n){return z("Rule "+e+" involves an alternation which has inconsistent arity (expected "+t+", got "+r+")",n.source)}function ee(e,t,r){let n=e.length,i=e.slice(0,r),s=e.slice(r+t.length);return(i+t+s).substr(0,n)}function et(...e){var t;let r,{offset:n}=this,{xq:i}=u,s=new S;s.append("Line "+this.lineNum+", col "+this.colNum+":\n");let a=(t=[null==this.prevLine?0:this.lineNum-1,this.lineNum,null==this.nextLine?0:this.lineNum+1],r=0,t.map(e=>{let t=e.toString();return r=Math.max(r,t.length),t}).map(e=>x(e,r))),o=(e,t,r)=>{s.append(r+a[e]+" | "+t+"\n")};null!=this.prevLine&&o(0,this.prevLine,"  "),o(1,this.line,"> ");let l=this.line.length,c=i(" ",l+1);for(let t=0;t<e.length;++t){let r=e[t][0],s=e[t][1];h(r>=0&&r<=s,"range start must be >= 0 and <= end");let a=n-this.colNum+1;r=Math.max(0,r-a),c=ee(c,i("~",(s=Math.min(s-a,l))-r),r)}let p=2+a[1].length+3;return s.append(i(" ",p)),c=ee(c,"^",this.colNum-1),s.append(c.replace(/ +$/,"")+"\n"),null!=this.nextLine&&o(2,this.nextLine,"  "),s.contents()}let er=[];function en(e,t){let r=1,n=1,i=0,s=0,a=null,o=null,l=-1;for(;i<t;){let t=e.charAt(i++);"\n"===t?(r++,n=1,l=s,s=i):"\r"!==t&&n++}let u=e.indexOf("\n",s);if(-1===u)u=e.length;else{let t=e.indexOf("\n",u+1);a=(a=-1===t?e.slice(u):e.slice(u,t)).replace(/^\r?\n/,"").replace(/\r$/,"")}return l>=0&&(o=e.slice(l,s).replace(/\r?\n$/,"")),{offset:t,lineNum:r,colNum:n,line:e.slice(s,u).replace(/\r$/,""),prevLine:o,nextLine:a,toString:et}}function ei(e,t,...r){return en(e,t).toString(...r)}let es=(()=>{let e=0;return t=>""+t+e++})();class ea{constructor(e,t,r){this.sourceString=e,this.startIdx=t,this.endIdx=r}get contents(){return void 0===this._contents&&(this._contents=this.sourceString.slice(this.startIdx,this.endIdx)),this._contents}get length(){return this.endIdx-this.startIdx}coverageWith(...e){return ea.coverage(...e,this)}collapsedLeft(){return new ea(this.sourceString,this.startIdx,this.startIdx)}collapsedRight(){return new ea(this.sourceString,this.endIdx,this.endIdx)}getLineAndColumn(){return en(this.sourceString,this.startIdx)}getLineAndColumnMessage(){let e=[this.startIdx,this.endIdx];return ei(this.sourceString,this.startIdx,e)}minus(e){if(this.sourceString!==e.sourceString)throw K();if(this.startIdx===e.startIdx&&this.endIdx===e.endIdx)return[];if(this.startIdx<e.startIdx&&e.endIdx<this.endIdx)return[new ea(this.sourceString,this.startIdx,e.startIdx),new ea(this.sourceString,e.endIdx,this.endIdx)];if(this.startIdx<e.endIdx&&e.endIdx<this.endIdx)return[new ea(this.sourceString,e.endIdx,this.endIdx)];if(this.startIdx<e.startIdx&&e.startIdx<this.endIdx)return[new ea(this.sourceString,this.startIdx,e.startIdx)];else return[this]}relativeTo(e){if(this.sourceString!==e.sourceString)throw K();return h(this.startIdx>=e.startIdx&&this.endIdx<=e.endIdx,"other interval does not cover this one"),new ea(this.sourceString,this.startIdx-e.startIdx,this.endIdx-e.startIdx)}trimmed(){let{contents:e}=this,t=this.startIdx+e.match(/^\s*/)[0].length,r=this.endIdx-e.match(/\s*$/)[0].length;return new ea(this.sourceString,t,r)}subInterval(e,t){let r=this.startIdx+e;return new ea(this.sourceString,r,r+t)}}ea.coverage=function(e,...t){let{startIdx:r,endIdx:n}=e;for(let i of t)if(i.sourceString!==e.sourceString)throw K();else r=Math.min(r,i.startIdx),n=Math.max(n,i.endIdx);return new ea(e.sourceString,r,n)};class eo{constructor(e){this.source=e,this.pos=0,this.examinedLength=0}atEnd(){let e=this.pos>=this.source.length;return this.examinedLength=Math.max(this.examinedLength,this.pos+1),e}next(){let e=this.source[this.pos++];return this.examinedLength=Math.max(this.examinedLength,this.pos),e}nextCharCode(){let e=this.next();return e&&e.charCodeAt(0)}nextCodePoint(){let e=this.source.slice(this.pos++).codePointAt(0);return e>65535&&(this.pos+=1),this.examinedLength=Math.max(this.examinedLength,this.pos),e}matchString(e,t){let r;if(t){for(r=0;r<e.length;r++){let t=this.next(),n=e[r];if(null==t||t.toUpperCase()!==n.toUpperCase())return!1}return!0}for(r=0;r<e.length;r++)if(this.next()!==e[r])return!1;return!0}sourceSlice(e,t){return this.source.slice(e,t)}interval(e,t){return new ea(this.source,e,t||this.pos)}}class el{constructor(e,t,r,n,i,s,a){this.matcher=e,this.input=t,this.startExpr=r,this._cst=n,this._cstOffset=i,this._rightmostFailurePosition=s,this._rightmostFailures=a,this.failed()&&(m(this,"message",function(){let e="Expected "+this.getExpectedText();return ei(this.input,this.getRightmostFailurePosition())+e}),m(this,"shortMessage",function(){let e="expected "+this.getExpectedText(),t=en(this.input,this.getRightmostFailurePosition());return"Line "+t.lineNum+", col "+t.colNum+": "+e}))}succeeded(){return!!this._cst}failed(){return!this.succeeded()}getRightmostFailurePosition(){return this._rightmostFailurePosition}getRightmostFailures(){if(!this._rightmostFailures){this.matcher.setInput(this.input);let e=this.matcher._match(this.startExpr,{tracing:!1,positionToRecordFailures:this.getRightmostFailurePosition()});this._rightmostFailures=e.getRightmostFailures()}return this._rightmostFailures}toString(){return this.succeeded()?"[match succeeded]":"[match failed at position "+this.getRightmostFailurePosition()+"]"}getExpectedText(){if(this.succeeded())throw Error("cannot get expected text of a successful MatchResult");let e=new S,t=this.getRightmostFailures();t=t.filter(e=>!e.isFluffy());for(let r=0;r<t.length;r++)r>0&&(r===t.length-1?e.append(t.length>2?", or ":" or "):e.append(", ")),e.append(t[r].toString());return e.contents()}getInterval(){let e=this.getRightmostFailurePosition();return new ea(this.input,e,e)}}class eu{constructor(){this.applicationMemoKeyStack=[],this.memo={},this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,this.currentLeftRecursion=void 0}isActive(e){return this.applicationMemoKeyStack.indexOf(e.toMemoKey())>=0}enter(e){this.applicationMemoKeyStack.push(e.toMemoKey())}exit(){this.applicationMemoKeyStack.pop()}startLeftRecursion(e,t){t.isLeftRecursion=!0,t.headApplication=e,t.nextLeftRecursion=this.currentLeftRecursion,this.currentLeftRecursion=t;let{applicationMemoKeyStack:r}=this,n=r.indexOf(e.toMemoKey())+1,i=r.slice(n);t.isInvolved=function(e){return i.indexOf(e)>=0},t.updateInvolvedApplicationMemoKeys=function(){for(let e=n;e<r.length;e++){let t=r[e];this.isInvolved(t)||i.push(t)}}}endLeftRecursion(){this.currentLeftRecursion=this.currentLeftRecursion.nextLeftRecursion}shouldUseMemoizedResult(e){if(!e.isLeftRecursion)return!0;let{applicationMemoKeyStack:t}=this;for(let r=0;r<t.length;r++){let n=t[r];if(e.isInvolved(n))return!1}return!0}memoize(e,t){return this.memo[e]=t,this.maxExaminedLength=Math.max(this.maxExaminedLength,t.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,t.rightmostFailureOffset),t}clearObsoleteEntries(e,t){if(e+this.maxExaminedLength<=t)return;let{memo:r}=this;this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,Object.keys(r).forEach(n=>{let i=r[n];e+i.examinedLength>t?delete r[n]:(this.maxExaminedLength=Math.max(this.maxExaminedLength,i.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,i.rightmostFailureOffset))})}}let ec={succeeded:1,isRootNode:2,isImplicitSpaces:4,isMemoized:8,isHeadOfLeftRecursion:16,terminatesLR:32};function ep(e){return"string"==typeof e?e.replace(/ /g,"⋅").replace(/\t/g,"␉").replace(/\n/g,"␊").replace(/\r/g,"␍"):String(e)}class eh{constructor(e,t,r,n,i,s,a){this.input=e,this.pos=this.pos1=t,this.pos2=r,this.source=new ea(e,t,r),this.expr=n,this.bindings=s,this.children=a||[],this.terminatingLREntry=null,this._flags=i?ec.succeeded:0}get displayString(){return this.expr.toDisplayString()}clone(){return this.cloneWithExpr(this.expr)}cloneWithExpr(e){let t=new eh(this.input,this.pos,this.pos2,e,this.succeeded,this.bindings,this.children);return t.isHeadOfLeftRecursion=this.isHeadOfLeftRecursion,t.isImplicitSpaces=this.isImplicitSpaces,t.isMemoized=this.isMemoized,t.isRootNode=this.isRootNode,t.terminatesLR=this.terminatesLR,t.terminatingLREntry=this.terminatingLREntry,t}recordLRTermination(e,t){this.terminatingLREntry=new eh(this.input,this.pos,this.pos2,this.expr,!1,[t],[e]),this.terminatingLREntry.terminatesLR=!0}walk(e,t){let r=e;function n(e,i,s){let a=!0;r.enter&&r.enter.call(t,e,i,s)===eh.prototype.SKIP&&(a=!1),a&&(e.children.forEach(t=>{n(t,e,s+1)}),r.exit&&r.exit.call(t,e,i,s))}"function"==typeof r&&(r={enter:r}),this.isRootNode?this.children.forEach(e=>{n(e,null,0)}):n(this,null,0)}toString(){let e=new S;return this.walk((t,r,n)=>{if(!t)return this.SKIP;if("Alt"!==t.expr.constructor.name){if(e.append(function(e,t,r){let n=ep(e.slice(t,t+10));return n.length<10?n+f(" ",r-n.length).join(""):n}(t.input,t.pos,10)+f(" ",2*n+1).join("")),e.append((t.succeeded?"✓":"✗")+" "+t.displayString),t.isHeadOfLeftRecursion&&e.append(" (LR)"),t.succeeded){let r=ep(t.source.contents);e.append(" ⇒  "),e.append("string"==typeof r?'"'+r+'"':r)}e.append("\n")}}),e.contents()}}eh.prototype.SKIP={},Object.keys(ec).forEach(e=>{let t=ec[e];Object.defineProperty(eh.prototype,e,{get(){return(this._flags&t)!=0},set(e){e?this._flags|=t:this._flags&=~t}})}),N.prototype.allowsSkippingPrecedingSpace=p("allowsSkippingPrecedingSpace"),O.allowsSkippingPrecedingSpace=L.allowsSkippingPrecedingSpace=$.prototype.allowsSkippingPrecedingSpace=R.prototype.allowsSkippingPrecedingSpace=F.prototype.allowsSkippingPrecedingSpace=V.prototype.allowsSkippingPrecedingSpace=function(){return!0},P.prototype.allowsSkippingPrecedingSpace=D.prototype.allowsSkippingPrecedingSpace=U.prototype.allowsSkippingPrecedingSpace=B.prototype.allowsSkippingPrecedingSpace=q.prototype.allowsSkippingPrecedingSpace=E.prototype.allowsSkippingPrecedingSpace=T.prototype.allowsSkippingPrecedingSpace=function(){return!1},er.push(e=>{n=e}),N.prototype.assertAllApplicationsAreValid=function(e,t){i=0,this._assertAllApplicationsAreValid(e,t)},N.prototype._assertAllApplicationsAreValid=p("_assertAllApplicationsAreValid"),O._assertAllApplicationsAreValid=L._assertAllApplicationsAreValid=R.prototype._assertAllApplicationsAreValid=F.prototype._assertAllApplicationsAreValid=E.prototype._assertAllApplicationsAreValid=V.prototype._assertAllApplicationsAreValid=function(e,t){},U.prototype._assertAllApplicationsAreValid=function(e,t){i++,this.expr._assertAllApplicationsAreValid(e,t),i--},P.prototype._assertAllApplicationsAreValid=function(e,t){for(let r=0;r<this.terms.length;r++)this.terms[r]._assertAllApplicationsAreValid(e,t)},T.prototype._assertAllApplicationsAreValid=function(e,t){for(let r=0;r<this.factors.length;r++)this.factors[r]._assertAllApplicationsAreValid(e,t)},D.prototype._assertAllApplicationsAreValid=q.prototype._assertAllApplicationsAreValid=B.prototype._assertAllApplicationsAreValid=function(e,t){this.expr._assertAllApplicationsAreValid(e,t)},$.prototype._assertAllApplicationsAreValid=function(e,t,r=!1){var s;let a=t.rules[this.ruleName],o=I(e)&&0===i;if(!a)throw H(this.ruleName,t.name,this.source);if(!r&&I(this.ruleName)&&!o)throw s=this.ruleName,z("Cannot apply syntactic rule "+s+" from here (inside a lexical context)",this.source);let l=this.args.length,u=a.formals.length;if(l!==u)throw z("Wrong number of arguments for rule "+this.ruleName+" (expected "+u+", got "+l+")",this.source);let c=n&&a===n.rules.applySyntactic;if(n&&a===n.rules.caseInsensitive&&!(this.args[0]instanceof R))throw Z('a Terminal (e.g. "abc")',this.args[0]);if(c){let e=this.args[0];if(!(e instanceof $))throw Z("a syntactic rule application",e);if(!I(e.ruleName))throw function(e){let{ruleName:t}=e;return z(`applySyntactic is for syntactic rules, but '${t}' is a lexical rule. NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. See https://ohmjs.org/d/svl for more details.`,e.source)}(e);if(o)throw z("applySyntactic is not required here (in a syntactic context)",this.source)}this.args.forEach(r=>{if(r._assertAllApplicationsAreValid(e,t,c),1!==r.getArity())throw z("Invalid parameter to rule "+this.ruleName+": "+r+" has arity "+r.getArity()+", but parameter expressions must have arity 1",r.source)})},N.prototype.assertChoicesHaveUniformArity=p("assertChoicesHaveUniformArity"),O.assertChoicesHaveUniformArity=L.assertChoicesHaveUniformArity=R.prototype.assertChoicesHaveUniformArity=F.prototype.assertChoicesHaveUniformArity=E.prototype.assertChoicesHaveUniformArity=U.prototype.assertChoicesHaveUniformArity=V.prototype.assertChoicesHaveUniformArity=function(e){},P.prototype.assertChoicesHaveUniformArity=function(e){if(0===this.terms.length)return;let t=this.terms[0].getArity();for(let r=0;r<this.terms.length;r++){let n=this.terms[r];n.assertChoicesHaveUniformArity();let i=n.getArity();if(t!==i)throw Y(e,t,i,n)}},C.prototype.assertChoicesHaveUniformArity=function(e){let t=this.terms[0].getArity(),r=this.terms[1].getArity();if(t!==r)throw Y(e,r,t,this.terms[0])},T.prototype.assertChoicesHaveUniformArity=function(e){for(let t=0;t<this.factors.length;t++)this.factors[t].assertChoicesHaveUniformArity(e)},D.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)},q.prototype.assertChoicesHaveUniformArity=function(e){},B.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)},$.prototype.assertChoicesHaveUniformArity=function(e){},N.prototype.assertIteratedExprsAreNotNullable=p("assertIteratedExprsAreNotNullable"),O.assertIteratedExprsAreNotNullable=L.assertIteratedExprsAreNotNullable=R.prototype.assertIteratedExprsAreNotNullable=F.prototype.assertIteratedExprsAreNotNullable=E.prototype.assertIteratedExprsAreNotNullable=V.prototype.assertIteratedExprsAreNotNullable=function(e){},P.prototype.assertIteratedExprsAreNotNullable=function(e){for(let t=0;t<this.terms.length;t++)this.terms[t].assertIteratedExprsAreNotNullable(e)},T.prototype.assertIteratedExprsAreNotNullable=function(e){for(let t=0;t<this.factors.length;t++)this.factors[t].assertIteratedExprsAreNotNullable(e)},D.prototype.assertIteratedExprsAreNotNullable=function(e){if(this.expr.assertIteratedExprsAreNotNullable(e),this.expr.isNullable(e))throw X(this,[])},G.prototype.assertIteratedExprsAreNotNullable=q.prototype.assertIteratedExprsAreNotNullable=B.prototype.assertIteratedExprsAreNotNullable=U.prototype.assertIteratedExprsAreNotNullable=function(e){this.expr.assertIteratedExprsAreNotNullable(e)},$.prototype.assertIteratedExprsAreNotNullable=function(e){this.args.forEach(t=>{t.assertIteratedExprsAreNotNullable(e)})};class em{constructor(e){this.matchLength=e}get ctorName(){throw Error("subclass responsibility")}numChildren(){return this.children?this.children.length:0}childAt(e){if(this.children)return this.children[e]}indexOfChild(e){return this.children.indexOf(e)}hasChildren(){return this.numChildren()>0}hasNoChildren(){return!this.hasChildren()}onlyChild(){if(1===this.numChildren())return this.firstChild();throw Error("cannot get only child of a node of type "+this.ctorName+" (it has "+this.numChildren()+" children)")}firstChild(){if(!this.hasNoChildren())return this.childAt(0);throw Error("cannot get first child of a "+this.ctorName+" node, which has no children")}lastChild(){if(!this.hasNoChildren())return this.childAt(this.numChildren()-1);throw Error("cannot get last child of a "+this.ctorName+" node, which has no children")}childBefore(e){let t=this.indexOfChild(e);if(t<0)throw Error("Node.childBefore() called w/ an argument that is not a child");if(0!==t)return this.childAt(t-1);throw Error("cannot get child before first child")}childAfter(e){let t=this.indexOfChild(e);if(t<0)throw Error("Node.childAfter() called w/ an argument that is not a child");if(t!==this.numChildren()-1)return this.childAt(t+1);throw Error("cannot get child after last child")}isTerminal(){return!1}isNonterminal(){return!1}isIteration(){return!1}isOptional(){return!1}}class ed extends em{get ctorName(){return"_terminal"}isTerminal(){return!0}get primitiveValue(){throw Error("The `primitiveValue` property was removed in Ohm v17.")}}class ef extends em{constructor(e,t,r,n){super(n),this.ruleName=e,this.children=t,this.childOffsets=r}get ctorName(){return this.ruleName}isNonterminal(){return!0}isLexical(){return y(this.ctorName)}isSyntactic(){return I(this.ctorName)}}class eg extends em{constructor(e,t,r,n){super(r),this.children=e,this.childOffsets=t,this.optional=n}get ctorName(){return"_iter"}isIteration(){return!0}isOptional(){return this.optional}}function ev(e,t){let r={};if(e.source&&t){let n=e.source.relativeTo(t);r.sourceInterval=[n.startIdx,n.endIdx]}return r}function eI(e){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)}function ey(e){let t=Object.create(null);e.forEach(e=>{t[e]=(t[e]||0)+1}),Object.keys(t).forEach(r=>{if(t[r]<=1)return;let n=1;e.forEach((t,i)=>{t===r&&(e[i]=t+"_"+n++)})})}N.prototype.eval=p("eval"),O.eval=function(e){let{inputStream:t}=e,r=t.pos,n=t.nextCodePoint();return void 0!==n?(e.pushBinding(new ed(String.fromCodePoint(n).length),r),!0):(e.processFailure(r,this),!1)},L.eval=function(e){let{inputStream:t}=e,r=t.pos;return t.atEnd()?(e.pushBinding(new ed(0),r),!0):(e.processFailure(r,this),!1)},R.prototype.eval=function(e){let{inputStream:t}=e,r=t.pos;return t.matchString(this.obj)?(e.pushBinding(new ed(this.obj.length),r),!0):(e.processFailure(r,this),!1)},F.prototype.eval=function(e){let{inputStream:t}=e,r=t.pos,n=this.matchCodePoint?t.nextCodePoint():t.nextCharCode();return void 0!==n&&this.from.codePointAt(0)<=n&&n<=this.to.codePointAt(0)?(e.pushBinding(new ed(String.fromCodePoint(n).length),r),!0):(e.processFailure(r,this),!1)},E.prototype.eval=function(e){return e.eval(e.currentApplication().args[this.index])},U.prototype.eval=function(e){e.enterLexifiedContext();let t=e.eval(this.expr);return e.exitLexifiedContext(),t},P.prototype.eval=function(e){for(let t=0;t<this.terms.length;t++)if(e.eval(this.terms[t]))return!0;return!1},T.prototype.eval=function(e){for(let t=0;t<this.factors.length;t++){let r=this.factors[t];if(!e.eval(r))return!1}return!0},D.prototype.eval=function(e){let t,{inputStream:r}=e,n=r.pos,i=this.getArity(),s=[],a=[];for(;s.length<i;)s.push([]),a.push([]);let o=0,l=n;for(;o<this.maxNumMatches&&e.eval(this.expr);){if(r.pos===l)throw X(this,e._applicationStack);l=r.pos,o++;let n=e._bindings.splice(e._bindings.length-i,i),u=e._bindingOffsets.splice(e._bindingOffsets.length-i,i);for(t=0;t<n.length;t++)s[t].push(n[t]),a[t].push(u[t])}if(o<this.minNumMatches)return!1;let u=e.posToOffset(n),c=0;if(o>0){let e=s[i-1],t=a[i-1];c=t[t.length-1]+e[e.length-1].matchLength-(u=a[0][0])}let p=this instanceof G;for(t=0;t<s.length;t++)e._bindings.push(new eg(s[t],a[t],c,p)),e._bindingOffsets.push(u);return!0},q.prototype.eval=function(e){let{inputStream:t}=e,r=t.pos;e.pushFailuresInfo();let n=e.eval(this.expr);return(e.popFailuresInfo(),n)?(e.processFailure(r,this),!1):(t.pos=r,!0)},B.prototype.eval=function(e){let{inputStream:t}=e,r=t.pos;return!!e.eval(this.expr)&&(t.pos=r,!0)},$.prototype.eval=function(e){let t=e.currentApplication(),r=t?t.args:[],n=this.substituteParams(r),i=e.getCurrentPosInfo();if(i.isActive(n))return n.handleCycle(e);let s=n.toMemoKey(),a=i.memo[s];if(a&&i.shouldUseMemoizedResult(a)){if(e.hasNecessaryInfo(a))return e.useMemoizedResult(e.inputStream.pos,a);delete i.memo[s]}return n.reallyEval(e)},$.prototype.handleCycle=function(e){let t=e.getCurrentPosInfo(),{currentLeftRecursion:r}=t,n=this.toMemoKey(),i=t.memo[n];return r&&r.headApplication.toMemoKey()===n?i.updateInvolvedApplicationMemoKeys():i||(i=t.memoize(n,{matchLength:0,examinedLength:0,value:!1,rightmostFailureOffset:-1}),t.startLeftRecursion(this,i)),e.useMemoizedResult(e.inputStream.pos,i)},$.prototype.reallyEval=function(e){let t,{inputStream:r}=e,n=r.pos,i=e.getCurrentPosInfo(),s=e.grammar.rules[this.ruleName],{body:a}=s,{description:o}=s;e.enterApplication(i,this),o&&e.pushFailuresInfo();let l=r.examinedLength;r.examinedLength=0;let u=this.evalOnce(a,e),c=i.currentLeftRecursion,p=this.toMemoKey(),m=c&&c.headApplication.toMemoKey()===p;e.doNotMemoize?e.doNotMemoize=!1:m?(u=this.growSeedResult(a,e,n,c,u),i.endLeftRecursion(),(t=c).examinedLength=r.examinedLength-n,t.rightmostFailureOffset=e._getRightmostFailureOffset(),i.memoize(p,t)):c&&c.isInvolved(p)||(t=i.memoize(p,{matchLength:r.pos-n,examinedLength:r.examinedLength-n,value:u,failuresAtRightmostPosition:e.cloneRecordedFailures(),rightmostFailureOffset:e._getRightmostFailureOffset()}));let d=!!u;if(o&&(e.popFailuresInfo(),d||e.processFailure(n,this),t&&(t.failuresAtRightmostPosition=e.cloneRecordedFailures())),e.isTracing()&&t){let r=e.getTraceEntry(n,this,d,d?[u]:[]);m&&(h(null!=r.terminatingLREntry||!d),r.isHeadOfLeftRecursion=!0),t.traceEntry=r}return r.examinedLength=Math.max(r.examinedLength,l),e.exitApplication(i,u),d},$.prototype.evalOnce=function(e,t){let{inputStream:r}=t,n=r.pos;if(!t.eval(e))return!1;{let i=e.getArity(),s=t._bindings.splice(t._bindings.length-i,i),a=t._bindingOffsets.splice(t._bindingOffsets.length-i,i),o=r.pos-n;return new ef(this.ruleName,s,a,o)}},$.prototype.growSeedResult=function(e,t,r,n,i){if(!i)return!1;let{inputStream:s}=t;for(;;){if(n.matchLength=s.pos-r,n.value=i,n.failuresAtRightmostPosition=t.cloneRecordedFailures(),t.isTracing()){let e=t.trace[t.trace.length-1];n.traceEntry=new eh(t.input,r,s.pos,this,!0,[i],[e.clone()])}if(s.pos=r,i=this.evalOnce(e,t),s.pos-r<=n.matchLength)break;t.isTracing()&&t.trace.splice(-2,1)}return t.isTracing()&&n.traceEntry.recordLRTermination(t.trace.pop(),i),s.pos=r+n.matchLength,n.value},V.prototype.eval=function(e){let{inputStream:t}=e,r=t.pos,n=t.next();return n&&this.pattern.test(n)?(e.pushBinding(new ed(n.length),r),!0):(e.processFailure(r,this),!1)},N.prototype.getArity=p("getArity"),O.getArity=L.getArity=R.prototype.getArity=F.prototype.getArity=E.prototype.getArity=$.prototype.getArity=V.prototype.getArity=function(){return 1},P.prototype.getArity=function(){return 0===this.terms.length?0:this.terms[0].getArity()},T.prototype.getArity=function(){let e=0;for(let t=0;t<this.factors.length;t++)e+=this.factors[t].getArity();return e},D.prototype.getArity=function(){return this.expr.getArity()},q.prototype.getArity=function(){return 0},B.prototype.getArity=U.prototype.getArity=function(){return this.expr.getArity()},N.prototype.outputRecipe=p("outputRecipe"),O.outputRecipe=function(e,t){return["any",ev(this,t)]},L.outputRecipe=function(e,t){return["end",ev(this,t)]},R.prototype.outputRecipe=function(e,t){return["terminal",ev(this,t),this.obj]},F.prototype.outputRecipe=function(e,t){return["range",ev(this,t),this.from,this.to]},E.prototype.outputRecipe=function(e,t){return["param",ev(this,t),this.index]},P.prototype.outputRecipe=function(e,t){return["alt",ev(this,t)].concat(this.terms.map(r=>r.outputRecipe(e,t)))},C.prototype.outputRecipe=function(e,t){return this.terms[0].outputRecipe(e,t)},k.prototype.outputRecipe=function(e,t){let r=this.terms.slice(0,this.expansionPos),n=this.terms.slice(this.expansionPos+1);return["splice",ev(this,t),r.map(r=>r.outputRecipe(e,t)),n.map(r=>r.outputRecipe(e,t))]},T.prototype.outputRecipe=function(e,t){return["seq",ev(this,t)].concat(this.factors.map(r=>r.outputRecipe(e,t)))},j.prototype.outputRecipe=M.prototype.outputRecipe=G.prototype.outputRecipe=q.prototype.outputRecipe=B.prototype.outputRecipe=U.prototype.outputRecipe=function(e,t){return[this.constructor.name.toLowerCase(),ev(this,t),this.expr.outputRecipe(e,t)]},$.prototype.outputRecipe=function(e,t){return["app",ev(this,t),this.ruleName,this.args.map(r=>r.outputRecipe(e,t))]},V.prototype.outputRecipe=function(e,t){return["unicodeChar",ev(this,t),this.category]},N.prototype.introduceParams=p("introduceParams"),O.introduceParams=L.introduceParams=R.prototype.introduceParams=F.prototype.introduceParams=E.prototype.introduceParams=V.prototype.introduceParams=function(e){return this},P.prototype.introduceParams=function(e){return this.terms.forEach((t,r,n)=>{n[r]=t.introduceParams(e)}),this},T.prototype.introduceParams=function(e){return this.factors.forEach((t,r,n)=>{n[r]=t.introduceParams(e)}),this},D.prototype.introduceParams=q.prototype.introduceParams=B.prototype.introduceParams=U.prototype.introduceParams=function(e){return this.expr=this.expr.introduceParams(e),this},$.prototype.introduceParams=function(e){let t=e.indexOf(this.ruleName);if(!(t>=0))return this.args.forEach((t,r,n)=>{n[r]=t.introduceParams(e)}),this;if(this.args.length>0)throw Error("Parameterized rules cannot be passed as arguments to another rule.");return new E(t).withSource(this.source)},N.prototype.isNullable=function(e){return this._isNullable(e,Object.create(null))},N.prototype._isNullable=p("_isNullable"),O._isNullable=F.prototype._isNullable=E.prototype._isNullable=M.prototype._isNullable=V.prototype._isNullable=function(e,t){return!1},L._isNullable=function(e,t){return!0},R.prototype._isNullable=function(e,t){return"string"==typeof this.obj&&""===this.obj},P.prototype._isNullable=function(e,t){return 0===this.terms.length||this.terms.some(r=>r._isNullable(e,t))},T.prototype._isNullable=function(e,t){return this.factors.every(r=>r._isNullable(e,t))},j.prototype._isNullable=G.prototype._isNullable=q.prototype._isNullable=B.prototype._isNullable=function(e,t){return!0},U.prototype._isNullable=function(e,t){return this.expr._isNullable(e,t)},$.prototype._isNullable=function(e,t){let r=this.toMemoKey();if(!Object.prototype.hasOwnProperty.call(t,r)){let{body:n}=e.rules[this.ruleName],i=n.substituteParams(this.args);t[r]=!1,t[r]=i._isNullable(e,t)}return t[r]},N.prototype.substituteParams=p("substituteParams"),O.substituteParams=L.substituteParams=R.prototype.substituteParams=F.prototype.substituteParams=V.prototype.substituteParams=function(e){return this},E.prototype.substituteParams=function(e){return e[this.index]},P.prototype.substituteParams=function(e){return new P(this.terms.map(t=>t.substituteParams(e)))},T.prototype.substituteParams=function(e){return new T(this.factors.map(t=>t.substituteParams(e)))},D.prototype.substituteParams=q.prototype.substituteParams=B.prototype.substituteParams=U.prototype.substituteParams=function(e){return new this.constructor(this.expr.substituteParams(e))},$.prototype.substituteParams=function(e){if(0===this.args.length)return this;{let t=this.args.map(t=>t.substituteParams(e));return new $(this.ruleName,t)}},N.prototype.toArgumentNameList=p("toArgumentNameList"),O.toArgumentNameList=function(e,t){return["any"]},L.toArgumentNameList=function(e,t){return["end"]},R.prototype.toArgumentNameList=function(e,t){return"string"==typeof this.obj&&/^[_a-zA-Z0-9]+$/.test(this.obj)?["_"+this.obj]:["$"+e]},F.prototype.toArgumentNameList=function(e,t){let r=this.from+"_to_"+this.to;return eI(r)||(r="_"+r),eI(r)||(r="$"+e),[r]},P.prototype.toArgumentNameList=function(e,t){let r=this.terms.map(t=>t.toArgumentNameList(e,!0)),n=[],i=r[0].length;for(let e=0;e<i;e++){let t=[];for(let n=0;n<this.terms.length;n++)t.push(r[n][e]);let i=v(t);n.push(i.join("_or_"))}return t||ey(n),n},T.prototype.toArgumentNameList=function(e,t){let r=[];return this.factors.forEach(t=>{let n=t.toArgumentNameList(e,!0);r=r.concat(n),e+=n.length}),t||ey(r),r},D.prototype.toArgumentNameList=function(e,t){let r=this.expr.toArgumentNameList(e,t).map(e=>"s"===e[e.length-1]?e+"es":e+"s");return t||ey(r),r},G.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t).map(e=>"opt"+e[0].toUpperCase()+e.slice(1))},q.prototype.toArgumentNameList=function(e,t){return[]},B.prototype.toArgumentNameList=U.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t)},$.prototype.toArgumentNameList=function(e,t){return[this.ruleName]},V.prototype.toArgumentNameList=function(e,t){return["$"+e]},E.prototype.toArgumentNameList=function(e,t){return["param"+this.index]},N.prototype.toDisplayString=p("toDisplayString"),P.prototype.toDisplayString=T.prototype.toDisplayString=function(){return this.source?this.source.trimmed().contents:"["+this.constructor.name+"]"},O.toDisplayString=L.toDisplayString=D.prototype.toDisplayString=q.prototype.toDisplayString=B.prototype.toDisplayString=U.prototype.toDisplayString=R.prototype.toDisplayString=F.prototype.toDisplayString=E.prototype.toDisplayString=function(){return this.toString()},$.prototype.toDisplayString=function(){if(!(this.args.length>0))return this.ruleName;{let e=this.args.map(e=>e.toDisplayString());return this.ruleName+"<"+e.join(",")+">"}},V.prototype.toDisplayString=function(){return"Unicode ["+this.category+"] character"};class ex{constructor(e,t,r){if(!function(e){return"description"===e||"string"===e||"code"===e}(r))throw Error("invalid Failure type: "+r);this.pexpr=e,this.text=t,this.type=r,this.fluffy=!1}getPExpr(){return this.pexpr}getText(){return this.text}getType(){return this.type}isDescription(){return"description"===this.type}isStringTerminal(){return"string"===this.type}isCode(){return"code"===this.type}isFluffy(){return this.fluffy}makeFluffy(){this.fluffy=!0}clearFluffy(){this.fluffy=!1}subsumes(e){return this.getText()===e.getText()&&this.type===e.type&&(!this.isFluffy()||this.isFluffy()&&e.isFluffy())}toString(){return"string"===this.type?JSON.stringify(this.getText()):this.getText()}clone(){let e=new ex(this.pexpr,this.text,this.type);return this.isFluffy()&&e.makeFluffy(),e}toKey(){return this.toString()+"#"+this.type}}N.prototype.toFailure=p("toFailure"),O.toFailure=function(e){return new ex(this,"any object","description")},L.toFailure=function(e){return new ex(this,"end of input","description")},R.prototype.toFailure=function(e){return new ex(this,this.obj,"string")},F.prototype.toFailure=function(e){return new ex(this,JSON.stringify(this.from)+".."+JSON.stringify(this.to),"code")},q.prototype.toFailure=function(e){return new ex(this,this.expr===O?"nothing":"not "+this.expr.toFailure(e),"description")},B.prototype.toFailure=function(e){return this.expr.toFailure(e)},$.prototype.toFailure=function(e){let{description:t}=e.rules[this.ruleName];return t||(t=(/^[aeiouAEIOU]/.test(this.ruleName)?"an":"a")+" "+this.ruleName),new ex(this,t,"description")},V.prototype.toFailure=function(e){return new ex(this,"a Unicode ["+this.category+"] character","description")},P.prototype.toFailure=function(e){return new ex(this,"("+this.terms.map(t=>t.toFailure(e)).join(" or ")+")","description")},T.prototype.toFailure=function(e){return new ex(this,"("+this.factors.map(t=>t.toFailure(e)).join(" ")+")","description")},D.prototype.toFailure=function(e){return new ex(this,"("+this.expr.toFailure(e)+this.operator+")","description")},N.prototype.toString=p("toString"),O.toString=function(){return"any"},L.toString=function(){return"end"},R.prototype.toString=function(){return JSON.stringify(this.obj)},F.prototype.toString=function(){return JSON.stringify(this.from)+".."+JSON.stringify(this.to)},E.prototype.toString=function(){return"$"+this.index},U.prototype.toString=function(){return"#("+this.expr.toString()+")"},P.prototype.toString=function(){return 1===this.terms.length?this.terms[0].toString():"("+this.terms.map(e=>e.toString()).join(" | ")+")"},T.prototype.toString=function(){return 1===this.factors.length?this.factors[0].toString():"("+this.factors.map(e=>e.toString()).join(" ")+")"},D.prototype.toString=function(){return this.expr+this.operator},q.prototype.toString=function(){return"~"+this.expr},B.prototype.toString=function(){return"&"+this.expr},$.prototype.toString=function(){if(!(this.args.length>0))return this.ruleName;{let e=this.args.map(e=>e.toString());return this.ruleName+"<"+e.join(",")+">"}},V.prototype.toString=function(){return"\\p{"+this.category+"}"};class eS extends N{constructor(e){super(),this.obj=e}_getString(e){let t=e.currentApplication().args[this.obj.index];return h(t instanceof R,"expected a Terminal expression"),t.obj}allowsSkippingPrecedingSpace(){return!0}eval(e){let{inputStream:t}=e,r=t.pos,n=this._getString(e);return t.matchString(n,!0)?(e.pushBinding(new ed(n.length),r),!0):(e.processFailure(r,this),!1)}getArity(){return 1}substituteParams(e){return new eS(this.obj.substituteParams(e))}toDisplayString(){return this.obj.toDisplayString()+" (case-insensitive)"}toFailure(e){return new ex(this,this.obj.toFailure(e)+" (case-insensitive)","description")}_isNullable(e,t){return this.obj._isNullable(e,t)}}er.push(e=>{s=e.rules.applySyntactic.body});let e_=new $("spaces");class eb{constructor(e,t,r){this.matcher=e,this.startExpr=t,this.grammar=e.grammar,this.input=e.getInput(),this.inputStream=new eo(this.input),this.memoTable=e._memoTable,this.userData=void 0,this.doNotMemoize=!1,this._bindings=[],this._bindingOffsets=[],this._applicationStack=[],this._posStack=[0],this.inLexifiedContextStack=[!1],this.rightmostFailurePosition=-1,this._rightmostFailurePositionStack=[],this._recordedFailuresStack=[],void 0!==r&&(this.positionToRecordFailures=r,this.recordedFailures=Object.create(null))}posToOffset(e){return e-this._posStack[this._posStack.length-1]}enterApplication(e,t){this._posStack.push(this.inputStream.pos),this._applicationStack.push(t),this.inLexifiedContextStack.push(!1),e.enter(t),this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this.rightmostFailurePosition=-1}exitApplication(e,t){let r=this._posStack.pop();this._applicationStack.pop(),this.inLexifiedContextStack.pop(),e.exit(),this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,this._rightmostFailurePositionStack.pop()),t&&this.pushBinding(t,r)}enterLexifiedContext(){this.inLexifiedContextStack.push(!0)}exitLexifiedContext(){this.inLexifiedContextStack.pop()}currentApplication(){return this._applicationStack[this._applicationStack.length-1]}inSyntacticContext(){let e=this.currentApplication();return e?e.isSyntactic()&&!this.inLexifiedContext():this.startExpr.factors[0].isSyntactic()}inLexifiedContext(){return this.inLexifiedContextStack[this.inLexifiedContextStack.length-1]}skipSpaces(){return this.pushFailuresInfo(),this.eval(e_),this.popBinding(),this.popFailuresInfo(),this.inputStream.pos}skipSpacesIfInSyntacticContext(){return this.inSyntacticContext()?this.skipSpaces():this.inputStream.pos}maybeSkipSpacesBefore(e){return e.allowsSkippingPrecedingSpace()&&e!==e_?this.skipSpacesIfInSyntacticContext():this.inputStream.pos}pushBinding(e,t){this._bindings.push(e),this._bindingOffsets.push(this.posToOffset(t))}popBinding(){this._bindings.pop(),this._bindingOffsets.pop()}numBindings(){return this._bindings.length}truncateBindings(e){for(;this._bindings.length>e;)this.popBinding()}getCurrentPosInfo(){return this.getPosInfo(this.inputStream.pos)}getPosInfo(e){let t=this.memoTable[e];return t||(t=this.memoTable[e]=new eu),t}processFailure(e,t){if(this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,e),this.recordedFailures&&e===this.positionToRecordFailures){let e=this.currentApplication();e&&(t=t.substituteParams(e.args)),this.recordFailure(t.toFailure(this.grammar),!1)}}recordFailure(e,t){let r=e.toKey();this.recordedFailures[r]?this.recordedFailures[r].isFluffy()&&!e.isFluffy()&&this.recordedFailures[r].clearFluffy():this.recordedFailures[r]=t?e.clone():e}recordFailures(e,t){Object.keys(e).forEach(r=>{this.recordFailure(e[r],t)})}cloneRecordedFailures(){if(!this.recordedFailures)return;let e=Object.create(null);return Object.keys(this.recordedFailures).forEach(t=>{e[t]=this.recordedFailures[t].clone()}),e}getRightmostFailurePosition(){return this.rightmostFailurePosition}_getRightmostFailureOffset(){return this.rightmostFailurePosition>=0?this.posToOffset(this.rightmostFailurePosition):-1}getMemoizedTraceEntry(e,t){let r=this.memoTable[e];if(r&&t instanceof $){let e=r.memo[t.toMemoKey()];if(e&&e.traceEntry){let r=e.traceEntry.cloneWithExpr(t);return r.isMemoized=!0,r}}return null}getTraceEntry(e,t,r,n){if(t instanceof $){let e=this.currentApplication(),r=e?e.args:[];t=t.substituteParams(r)}return this.getMemoizedTraceEntry(e,t)||new eh(this.input,e,this.inputStream.pos,t,r,n,this.trace)}isTracing(){return!!this.trace}hasNecessaryInfo(e){return(!this.trace||!!e.traceEntry)&&(!this.recordedFailures||this.inputStream.pos+e.rightmostFailureOffset!==this.positionToRecordFailures||!!e.failuresAtRightmostPosition)}useMemoizedResult(e,t){this.trace&&this.trace.push(t.traceEntry);let r=this.inputStream.pos+t.rightmostFailureOffset;return this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,r),this.recordedFailures&&this.positionToRecordFailures===r&&t.failuresAtRightmostPosition&&this.recordFailures(t.failuresAtRightmostPosition,!0),this.inputStream.examinedLength=Math.max(this.inputStream.examinedLength,t.examinedLength+e),!!t.value&&(this.inputStream.pos+=t.matchLength,this.pushBinding(t.value,e),!0)}eval(e){let t,r,{inputStream:n}=this,i=this._bindings.length,a=this.userData;this.recordedFailures&&(t=this.recordedFailures,this.recordedFailures=Object.create(null));let o=n.pos,l=this.maybeSkipSpacesBefore(e);this.trace&&(r=this.trace,this.trace=[]);let u=e.eval(this);if(this.trace){let t=this._bindings.slice(i),n=this.getTraceEntry(l,e,u,t);n.isImplicitSpaces=e===e_,n.isRootNode=e===this.startExpr,r.push(n),this.trace=r}return u?this.recordedFailures&&n.pos===this.positionToRecordFailures&&Object.keys(this.recordedFailures).forEach(e=>{this.recordedFailures[e].makeFluffy()}):(n.pos=o,this.truncateBindings(i),this.userData=a),this.recordedFailures&&this.recordFailures(t,!1),e===s&&this.skipSpaces(),u}getMatchResult(){let e;this.grammar._setUpMatchState(this),this.eval(this.startExpr),this.recordedFailures&&(e=Object.keys(this.recordedFailures).map(e=>this.recordedFailures[e]));let t=this._bindings[0];return t&&(t.grammar=this.grammar),new el(this.matcher,this.input,this.startExpr,t,this._bindingOffsets[0],this.rightmostFailurePosition,e)}getTrace(){this.trace=[];let e=this.getMatchResult(),t=this.trace[this.trace.length-1];return t.result=e,t}pushFailuresInfo(){this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this._recordedFailuresStack.push(this.recordedFailures)}popFailuresInfo(){this.rightmostFailurePosition=this._rightmostFailurePositionStack.pop(),this.recordedFailures=this._recordedFailuresStack.pop()}}class eA{constructor(e){this.grammar=e,this._memoTable=[],this._input="",this._isMemoTableStale=!1}_resetMemoTable(){this._memoTable=[],this._isMemoTableStale=!1}getInput(){return this._input}setInput(e){return this._input!==e&&this.replaceInputRange(0,this._input.length,e),this}replaceInputRange(e,t,r){let n=this._input,i=this._memoTable;if(e<0||e>n.length||t<0||t>n.length||e>t)throw Error("Invalid indices: "+e+" and "+t);this._input=n.slice(0,e)+r+n.slice(t),this._input!==n&&i.length>0&&(this._isMemoTableStale=!0);let s=i.slice(t);i.length=e;for(let e=0;e<r.length;e++)i.push(void 0);for(let e of s)i.push(e);for(let t=0;t<e;t++){let r=i[t];r&&r.clearObsoleteEntries(t,e)}return this}match(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!1})}trace(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!0})}_match(e,t={}){let r={tracing:!1,incremental:!0,positionToRecordFailures:void 0,...t};if(r.incremental){if(this._isMemoTableStale&&!this.grammar.supportsIncrementalParsing){var n;throw n=this.grammar,z(`Grammar '${n.name}' does not support incremental parsing`)}}else this._resetMemoTable();let i=new eb(this,e,r.positionToRecordFailures);return r.tracing?i.getTrace():i.getMatchResult()}_getStartExpr(e){let t=e||this.grammar.defaultStartRule;if(!t)throw Error("Missing start rule argument -- the grammar has no default start rule.");return new T([this.grammar.parseApplication(t),L])}}let ew=[],eN=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class eO{constructor(e,t,r){this._node=e,this.source=t,this._baseInterval=r,e.isNonterminal()&&h(t===r),this._childWrappers=[]}_forgetMemoizedResultFor(e){delete this._node[this._semantics.attributeKeys[e]],this.children.forEach(t=>{t._forgetMemoizedResultFor(e)})}child(e){if(!(0<=e&&e<this._node.numChildren()))return;let t=this._childWrappers[e];if(!t){let r=this._node.childAt(e),n=this._node.childOffsets[e],i=this._baseInterval.subInterval(n,r.matchLength),s=r.isNonterminal()?i:this._baseInterval;t=this._childWrappers[e]=this._semantics.wrap(r,i,s)}return t}_children(){for(let e=0;e<this._node.numChildren();e++)this.child(e);return this._childWrappers}isIteration(){return this._node.isIteration()}isTerminal(){return this._node.isTerminal()}isNonterminal(){return this._node.isNonterminal()}isSyntactic(){return this.isNonterminal()&&this._node.isSyntactic()}isLexical(){return this.isNonterminal()&&this._node.isLexical()}isOptional(){return this._node.isOptional()}iteration(e){let t=e||[],r=new eg(t.map(e=>e._node),[],-1,!1),n=this._semantics.wrap(r,null,null);return n._childWrappers=t,n}get children(){return this._children()}get ctorName(){return this._node.ctorName}get numChildren(){return this._node.numChildren()}get sourceString(){return this.source.contents}}class eL{constructor(e,t){let r=this;if(this.grammar=e,this.checkedActionDicts=!1,this.Wrapper=class extends(t?t.Wrapper:eO){constructor(e,t,n){super(e,t,n),r.checkActionDictsIfHaventAlready(),this._semantics=r}toString(){return"[semantics wrapper for "+r.grammar.name+"]"}},this.super=t,t){if(!(e.equals(this.super.grammar)||e._inheritsFrom(this.super.grammar)))throw Error("Cannot extend a semantics for grammar '"+this.super.grammar.name+"' for use with grammar '"+e.name+"' (not a sub-grammar)");for(let e in this.operations=Object.create(this.super.operations),this.attributes=Object.create(this.super.attributes),this.attributeKeys=Object.create(null),this.attributes)Object.defineProperty(this.attributeKeys,e,{value:es(e)})}else this.operations=Object.create(null),this.attributes=Object.create(null),this.attributeKeys=Object.create(null)}toString(){return"[semantics for "+this.grammar.name+"]"}checkActionDictsIfHaventAlready(){this.checkedActionDicts||(this.checkActionDicts(),this.checkedActionDicts=!0)}checkActionDicts(){let e;for(e in this.operations)this.operations[e].checkActionDict(this.grammar);for(e in this.attributes)this.attributes[e].checkActionDict(this.grammar)}toRecipe(e){function t(e){return e.super!==eL.BuiltInSemantics._getSemantics()}let r="(function(g) {\n";if(t(this)){r+="  var semantics = "+this.super.toRecipe(!0)+"(g";let e=this.super.grammar,t=this.grammar;for(;t!==e;)r+=".superGrammar",t=t.superGrammar;r+=");\n  return g.extendSemantics(semantics)"}else r+="  return g.createSemantics()";return["Operation","Attribute"].forEach(e=>{let n=this[e.toLowerCase()+"s"];Object.keys(n).forEach(i=>{let s,{actionDict:a,formals:o,builtInDefault:l}=n[i],u=i;o.length>0&&(u+="("+o.join(", ")+")"),s=t(this)&&this.super[e.toLowerCase()+"s"][i]?"extend"+e:"add"+e,r+="\n    ."+s+"("+JSON.stringify(u)+", {";let c=[];Object.keys(a).forEach(e=>{if(a[e]!==l){let t=a[e].toString().trim();t=t.replace(/^.*\(/,"function("),c.push("\n      "+JSON.stringify(e)+": "+t)}}),r+=c.join(",")+"\n    })"})}),r+=";\n  })",e||(r="(function() {\n  var grammar = this.fromRecipe("+this.grammar.toRecipe()+");\n  var semantics = "+r+"(grammar);\n  return semantics;\n});\n"),r}addOperationOrAttribute(e,t,r){var n,i,s;let a=e+"s",o=eR(t,e),{name:l}=o,{formals:u}=o;this.assertNewName(l,e);let c=(n=e,i=l,s=m,function(...e){let t=(this._semantics.operations[i]||this._semantics.attributes[i]).formals.map(e=>this.args[e]);if(!this.isIteration()&&1===e.length)return s.apply(e[0],t);throw function(e,t,r,n){let i=n.slice(0,-1).map(e=>{let t="  "+e[0].name+" > "+e[1];return 3===e.length?t+" for '"+e[2]+"'":t}).join("\n");i+="\n  "+t+" > "+e;let s="";"_iter"===e&&(s="\nNOTE: as of Ohm v16, there is no default action for iteration nodes — see \n  https://ohmjs.org/d/dsa for details.");let a=z([`Missing semantic action for '${e}' in ${r} '${t}'.${s}`,"Action stack (most recent call last):",i].join("\n"));return a.name="missingSemanticAction",a}(this.ctorName,i,n,ew)}),p={_default:c};Object.keys(r).forEach(e=>{p[e]=r[e]});let h="operation"===e?new eF(l,u,p,c):new eE(l,p,c);function m(...t){let r=this._semantics[a][l];if(arguments.length!==r.formals.length)throw Error("Invalid number of arguments passed to "+l+" "+e+" (expected "+r.formals.length+", got "+arguments.length+")");let n=Object.create(null);for(let[e,i]of Object.entries(t))n[r.formals[e]]=i;let i=this.args;this.args=n;let s=r.execute(this._semantics,this);return this.args=i,s}h.checkActionDict(this.grammar),this[a][l]=h,"operation"===e?(this.Wrapper.prototype[l]=m,this.Wrapper.prototype[l].toString=function(){return"["+l+" operation]"}):(Object.defineProperty(this.Wrapper.prototype,l,{get:m,configurable:!0}),Object.defineProperty(this.attributeKeys,l,{value:es(l)}))}extendOperationOrAttribute(e,t,r){let n=e+"s";if(eR(t,"attribute"),!(this.super&&t in this.super[n]))throw Error("Cannot extend "+e+" '"+t+"': did not inherit an "+e+" with that name");if(eN(this[n],t))throw Error("Cannot extend "+e+" '"+t+"' again");let i=this[n][t].formals,s=Object.create(this[n][t].actionDict);Object.keys(r).forEach(e=>{s[e]=r[e]}),this[n][t]="operation"===e?new eF(t,i,s):new eE(t,s),this[n][t].checkActionDict(this.grammar)}assertNewName(e,t){if(eN(eO.prototype,e))throw Error("Cannot add "+t+" '"+e+"': that's a reserved name");if(e in this.operations)throw Error("Cannot add "+t+" '"+e+"': an operation with that name already exists");if(e in this.attributes)throw Error("Cannot add "+t+" '"+e+"': an attribute with that name already exists")}wrap(e,t,r){let n=r||t;return e instanceof this.Wrapper?e:new this.Wrapper(e,t,n)}}function eR(e,t){if(!eL.prototypeGrammar)return h(-1===e.indexOf("(")),{name:e,formals:[]};let r=eL.prototypeGrammar.match(e,"operation"===t?"OperationSignature":"AttributeSignature");if(r.failed())throw Error(r.message);return eL.prototypeGrammarSemantics(r).parse()}eL.createSemantics=function(e,t){let r=new eL(e,void 0!==t?t:eL.BuiltInSemantics._getSemantics()),n=function(t){if(!(t instanceof el))throw TypeError("Semantics expected a MatchResult, but got "+A(t));if(t.failed())throw TypeError("cannot apply Semantics to "+t.toString());let n=t._cst;if(n.grammar!==e)throw Error("Cannot use a MatchResult from grammar '"+n.grammar.name+"' with a semantics for '"+e.name+"'");let i=new eo(t.input);return r.wrap(n,i.interval(t._cstOffset,t.input.length))};return n.addOperation=function(e,t){return r.addOperationOrAttribute("operation",e,t),n},n.extendOperation=function(e,t){return r.extendOperationOrAttribute("operation",e,t),n},n.addAttribute=function(e,t){return r.addOperationOrAttribute("attribute",e,t),n},n.extendAttribute=function(e,t){return r.extendOperationOrAttribute("attribute",e,t),n},n._getActionDict=function(t){let n=r.operations[t]||r.attributes[t];if(!n)throw Error('"'+t+'" is not a valid operation or attribute name in this semantics for "'+e.name+'"');return n.actionDict},n._remove=function(e){let t;return e in r.operations?(t=r.operations[e],delete r.operations[e]):e in r.attributes&&(t=r.attributes[e],delete r.attributes[e]),delete r.Wrapper.prototype[e],t},n.getOperationNames=function(){return Object.keys(r.operations)},n.getAttributeNames=function(){return Object.keys(r.attributes)},n.getGrammar=function(){return r.grammar},n.toRecipe=function(e){return r.toRecipe(e)},n.toString=r.toString.bind(r),n._getSemantics=function(){return r},n};class eF{constructor(e,t,r,n){this.name=e,this.formals=t,this.actionDict=r,this.builtInDefault=n}checkActionDict(e){e._checkTopDownActionDict(this.typeName,this.name,this.actionDict)}execute(e,t){try{let{ctorName:e}=t._node,r=this.actionDict[e];if(r)return ew.push([this,e]),r.apply(t,t._children());if(t.isNonterminal()&&(r=this.actionDict._nonterminal))return ew.push([this,"_nonterminal",e]),r.apply(t,t._children());return ew.push([this,"default action",e]),this.actionDict._default.apply(t,t._children())}finally{ew.pop()}}}eF.prototype.typeName="operation";class eE extends eF{constructor(e,t,r){super(e,[],t,r)}execute(e,t){let r=t._node,n=e.attributeKeys[this.name];return eN(r,n)||(r[n]=eF.prototype.execute.call(this,e,t)),r[n]}}eE.prototype.typeName="attribute";let eP=["_iter","_terminal","_nonterminal","_default"];function eC(e){return Object.keys(e.rules).sort().map(t=>e.rules[t])}let ek=e=>e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029");class eT{constructor(e,t,r,n){if(this.name=e,this.superGrammar=t,this.rules=r,n){if(!(n in r))throw Error("Invalid start rule: '"+n+"' is not a rule in grammar '"+e+"'");this.defaultStartRule=n}this._matchStateInitializer=void 0,this.supportsIncrementalParsing=!0}matcher(){return new eA(this)}isBuiltIn(){return this===eT.ProtoBuiltInRules||this===eT.BuiltInRules}equals(e){if(this===e)return!0;if(null==e||this.name!==e.name||this.defaultStartRule!==e.defaultStartRule||!(this.superGrammar===e.superGrammar||this.superGrammar.equals(e.superGrammar)))return!1;let t=eC(this),r=eC(e);return t.length===r.length&&t.every((e,t)=>e.description===r[t].description&&e.formals.join(",")===r[t].formals.join(",")&&e.body.toString()===r[t].body.toString())}match(e,t){let r=this.matcher();return r.replaceInputRange(0,0,e),r.match(t)}trace(e,t){let r=this.matcher();return r.replaceInputRange(0,0,e),r.trace(t)}createSemantics(){return eL.createSemantics(this)}extendSemantics(e){return eL.createSemantics(this,e._getSemantics())}_checkTopDownActionDict(e,t,r){let n=[];for(let e in r){let t=r[e];if(!eP.includes(e)&&!(e in this.rules)){n.push(`'${e}' is not a valid semantic action for '${this.name}'`);continue}if("function"!=typeof t){n.push(`'${e}' must be a function in an action dictionary for '${this.name}'`);continue}let i=t.length,s=this._topDownActionArity(e);if(i!==s){let t;t="_iter"===e||"_nonterminal"===e?`it should use a rest parameter, e.g. \`${e}(...children) {}\`. NOTE: this is new in Ohm v16 — see https://ohmjs.org/d/ati for details.`:`expected ${s}, got ${i}`,n.push(`Semantic action '${e}' has the wrong arity: ${t}`)}}if(n.length>0){let r=Error([`Found errors in the action dictionary of the '${t}' ${e}:`,...n.map(e=>"- "+e)].join("\n"));throw r.problems=n,r}}_topDownActionArity(e){return eP.includes(e)?0:this.rules[e].body.getArity()}_inheritsFrom(e){let t=this.superGrammar;for(;t;){if(t.equals(e,!0))return!0;t=t.superGrammar}return!1}toRecipe(e){let t={};this.source&&(t.source=this.source.contents);let r=null;this.defaultStartRule&&(r=this.defaultStartRule);let n={};Object.keys(this.rules).forEach(e=>{let t,r=this.rules[e],{body:i}=r,s=!this.superGrammar||!this.superGrammar.rules[e];t=s?"define":i instanceof C?"extend":"override";let a={};if(r.source&&this.source){let e=r.source.relativeTo(this.source);a.sourceInterval=[e.startIdx,e.endIdx]}let o=s?r.description:null,l=i.outputRecipe(r.formals,this.source);n[e]=[t,a,o,r.formals,l]});let i="null";e?i=e:this.superGrammar&&!this.superGrammar.isBuiltIn()&&(i=this.superGrammar.toRecipe());let s=[...["grammar",t,this.name].map(JSON.stringify),i,...[r,n].map(JSON.stringify)];return ek(`[${s.join(",")}]`)}toOperationActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}toAttributeActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}_toOperationOrAttributeActionDictionaryTemplate(){let e=new S;e.append("{");let t=!0;for(let r in this.rules){let{body:n}=this.rules[r];t?t=!1:e.append(","),e.append("\n"),e.append("  "),this.addSemanticActionTemplate(r,n,e)}return e.append("\n}"),e.contents()}addSemanticActionTemplate(e,t,r){r.append(e),r.append(": function(");let n=this._topDownActionArity(e);r.append(f("_",n).join(", ")),r.append(") {\n"),r.append("  }")}parseApplication(e){let t;if(-1===e.indexOf("<"))t=new $(e);else{let r=a.match(e,"Base_application");t=o(r,{})}if(!(t.ruleName in this.rules))throw H(t.ruleName,this.name);let{formals:r}=this.rules[t.ruleName];if(r.length!==t.args.length){let{source:e}=this.rules[t.ruleName];throw J(t.ruleName,r.length,t.args.length,e)}return t}_setUpMatchState(e){this._matchStateInitializer&&this._matchStateInitializer(e)}}eT.ProtoBuiltInRules=new eT("ProtoBuiltInRules",void 0,{any:{body:O,formals:[],description:"any character",primitive:!0},end:{body:L,formals:[],description:"end of input",primitive:!0},caseInsensitive:{body:new eS(new E(0)),formals:["str"],primitive:!0},lower:{body:new V("Ll"),formals:[],description:"a lowercase letter",primitive:!0},upper:{body:new V("Lu"),formals:[],description:"an uppercase letter",primitive:!0},unicodeLtmo:{body:new V("Ltmo"),formals:[],description:"a Unicode character in Lt, Lm, or Lo",primitive:!0},spaces:{body:new j(new $("space")),formals:[]},space:{body:new F("\0"," "),formals:[],description:"a space"}}),eT.initApplicationParser=function(e,t){a=e,o=t};class eD{constructor(e){this.name=e}sourceInterval(e,t){return this.source.subInterval(e,t-e)}ensureSuperGrammar(){return this.superGrammar||this.withSuperGrammar("BuiltInRules"===this.name?eT.ProtoBuiltInRules:eT.BuiltInRules),this.superGrammar}ensureSuperGrammarRuleForOverriding(e,t){let r=this.ensureSuperGrammar().rules[e];if(!r)throw z("Cannot override rule "+e+" because it is not declared in "+this.superGrammar.name,t);return r}installOverriddenOrExtendedRule(e,t,r,n){let i=g(t);if(i.length>0)throw Q(e,i,n);let s=this.ensureSuperGrammar().rules[e],a=s.formals,o=a?a.length:0;if(t.length!==o)throw J(e,o,t.length,n);return this.install(e,t,r,s.description,n)}install(e,t,r,n,i,s=!1){return this.rules[e]={body:r.introduceParams(t),formals:t,description:n,source:i,primitive:s},this}withSuperGrammar(e){if(this.superGrammar)throw Error("the super grammar of a GrammarDecl cannot be set more than once");return this.superGrammar=e,this.rules=Object.create(e.rules),e.isBuiltIn()||(this.defaultStartRule=e.defaultStartRule),this}withDefaultStartRule(e){return this.defaultStartRule=e,this}withSource(e){return this.source=new eo(e).interval(0,e.length),this}build(){let e=new eT(this.name,this.ensureSuperGrammar(),this.rules,this.defaultStartRule);e._matchStateInitializer=e.superGrammar._matchStateInitializer,e.supportsIncrementalParsing=e.superGrammar.supportsIncrementalParsing;let t=[],r=!1;return Object.keys(e.rules).forEach(n=>{let{body:i}=e.rules[n];try{i.assertChoicesHaveUniformArity(n)}catch(e){t.push(e)}try{i.assertAllApplicationsAreValid(n,e)}catch(e){t.push(e),r=!0}}),r||Object.keys(e.rules).forEach(r=>{let{body:n}=e.rules[r];try{n.assertIteratedExprsAreNotNullable(e,[])}catch(e){t.push(e)}}),t.length>0&&function(e){if(1===e.length)throw e[0];if(e.length>1)throw z(["Errors:"].concat(e.map(e=>e.message)).join("\n- "),e[0].interval)}(t),this.source&&(e.source=this.source),e}define(e,t,r,n,i,s){if(this.ensureSuperGrammar(),this.superGrammar.rules[e])throw W(e,this.name,this.superGrammar.name,i);if(this.rules[e])throw W(e,this.name,this.name,i);let a=g(t);if(a.length>0)throw Q(e,a,i);return this.install(e,t,r,n,i,s)}override(e,t,r,n,i){return this.ensureSuperGrammarRuleForOverriding(e,i),this.installOverriddenOrExtendedRule(e,t,r,i),this}extend(e,t,r,n,i){if(!this.ensureSuperGrammar().rules[e])throw z("Cannot extend rule "+e+" because it is not declared in "+this.superGrammar.name,i);let s=new C(this.superGrammar,e,r);return s.source=r.source,this.installOverriddenOrExtendedRule(e,t,s,i),this}}class ej{constructor(){this.currentDecl=null,this.currentRuleName=null}newGrammar(e){return new eD(e)}grammar(e,t,r,n,i){let s=new eD(t);return r&&s.withSuperGrammar(r instanceof eT?r:this.fromRecipe(r)),n&&s.withDefaultStartRule(n),e&&e.source&&s.withSource(e.source),this.currentDecl=s,Object.keys(i).forEach(e=>{let t;this.currentRuleName=e;let r=i[e],n=r[0],a=r[1],o=r[2],l=r[3],u=this.fromRecipe(r[4]);s.source&&a&&a.sourceInterval&&(t=s.source.subInterval(a.sourceInterval[0],a.sourceInterval[1]-a.sourceInterval[0])),s[n](e,l,u,o,t)}),this.currentRuleName=this.currentDecl=null,s.build()}terminal(e){return new R(e)}range(e,t){return new F(e,t)}param(e){return new E(e)}alt(...e){let t=[];for(let r of e)r instanceof N||(r=this.fromRecipe(r)),r instanceof P?t=t.concat(r.terms):t.push(r);return 1===t.length?t[0]:new P(t)}seq(...e){let t=[];for(let r of e)r instanceof N||(r=this.fromRecipe(r)),r instanceof T?t=t.concat(r.factors):t.push(r);return 1===t.length?t[0]:new T(t)}star(e){return e instanceof N||(e=this.fromRecipe(e)),new j(e)}plus(e){return e instanceof N||(e=this.fromRecipe(e)),new M(e)}opt(e){return e instanceof N||(e=this.fromRecipe(e)),new G(e)}not(e){return e instanceof N||(e=this.fromRecipe(e)),new q(e)}lookahead(e){return e instanceof N||(e=this.fromRecipe(e)),new B(e)}lex(e){return e instanceof N||(e=this.fromRecipe(e)),new U(e)}app(e,t){return t&&t.length>0&&(t=t.map(function(e){return e instanceof N?e:this.fromRecipe(e)},this)),new $(e,t)}splice(e,t){return new k(this.currentDecl.superGrammar,this.currentRuleName,e.map(e=>this.fromRecipe(e)),t.map(e=>this.fromRecipe(e)))}fromRecipe(e){let t="grammar"===e[0]?e.slice(1):e.slice(2),r=this[e[0]](...t),n=e[1];return n&&n.sourceInterval&&this.currentDecl&&r.withSource(this.currentDecl.sourceInterval(...n.sourceInterval)),r}}function eM(e){return"function"==typeof e?e.call(new ej):("string"==typeof e&&(e=JSON.parse(e)),new ej().fromRecipe(e))}let eG=eM(["grammar",{source:'BuiltInRules {\n\n  alnum  (an alpha-numeric character)\n    = letter\n    | digit\n\n  letter  (a letter)\n    = lower\n    | upper\n    | unicodeLtmo\n\n  digit  (a digit)\n    = "0".."9"\n\n  hexDigit  (a hexadecimal digit)\n    = digit\n    | "a".."f"\n    | "A".."F"\n\n  ListOf<elem, sep>\n    = NonemptyListOf<elem, sep>\n    | EmptyListOf<elem, sep>\n\n  NonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  EmptyListOf<elem, sep>\n    = /* nothing */\n\n  listOf<elem, sep>\n    = nonemptyListOf<elem, sep>\n    | emptyListOf<elem, sep>\n\n  nonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  emptyListOf<elem, sep>\n    = /* nothing */\n\n  // Allows a syntactic rule application within a lexical context.\n  applySyntactic<app> = app\n}'},"BuiltInRules",null,null,{alnum:["define",{sourceInterval:[18,78]},"an alpha-numeric character",[],["alt",{sourceInterval:[60,78]},["app",{sourceInterval:[60,66]},"letter",[]],["app",{sourceInterval:[73,78]},"digit",[]]]],letter:["define",{sourceInterval:[82,142]},"a letter",[],["alt",{sourceInterval:[107,142]},["app",{sourceInterval:[107,112]},"lower",[]],["app",{sourceInterval:[119,124]},"upper",[]],["app",{sourceInterval:[131,142]},"unicodeLtmo",[]]]],digit:["define",{sourceInterval:[146,177]},"a digit",[],["range",{sourceInterval:[169,177]},"0","9"]],hexDigit:["define",{sourceInterval:[181,254]},"a hexadecimal digit",[],["alt",{sourceInterval:[219,254]},["app",{sourceInterval:[219,224]},"digit",[]],["range",{sourceInterval:[231,239]},"a","f"],["range",{sourceInterval:[246,254]},"A","F"]]],ListOf:["define",{sourceInterval:[258,336]},null,["elem","sep"],["alt",{sourceInterval:[282,336]},["app",{sourceInterval:[282,307]},"NonemptyListOf",[["param",{sourceInterval:[297,301]},0],["param",{sourceInterval:[303,306]},1]]],["app",{sourceInterval:[314,336]},"EmptyListOf",[["param",{sourceInterval:[326,330]},0],["param",{sourceInterval:[332,335]},1]]]]],NonemptyListOf:["define",{sourceInterval:[340,388]},null,["elem","sep"],["seq",{sourceInterval:[372,388]},["param",{sourceInterval:[372,376]},0],["star",{sourceInterval:[377,388]},["seq",{sourceInterval:[378,386]},["param",{sourceInterval:[378,381]},1],["param",{sourceInterval:[382,386]},0]]]]],EmptyListOf:["define",{sourceInterval:[392,434]},null,["elem","sep"],["seq",{sourceInterval:[438,438]}]],listOf:["define",{sourceInterval:[438,516]},null,["elem","sep"],["alt",{sourceInterval:[462,516]},["app",{sourceInterval:[462,487]},"nonemptyListOf",[["param",{sourceInterval:[477,481]},0],["param",{sourceInterval:[483,486]},1]]],["app",{sourceInterval:[494,516]},"emptyListOf",[["param",{sourceInterval:[506,510]},0],["param",{sourceInterval:[512,515]},1]]]]],nonemptyListOf:["define",{sourceInterval:[520,568]},null,["elem","sep"],["seq",{sourceInterval:[552,568]},["param",{sourceInterval:[552,556]},0],["star",{sourceInterval:[557,568]},["seq",{sourceInterval:[558,566]},["param",{sourceInterval:[558,561]},1],["param",{sourceInterval:[562,566]},0]]]]],emptyListOf:["define",{sourceInterval:[572,682]},null,["elem","sep"],["seq",{sourceInterval:[685,685]}]],applySyntactic:["define",{sourceInterval:[685,710]},null,["app"],["param",{sourceInterval:[707,710]},0]]}]);eT.BuiltInRules=eG,l=eT.BuiltInRules,er.forEach(e=>{e(l)}),er=null;let eq=eM(["grammar",{source:'Ohm {\n\n  Grammars\n    = Grammar*\n\n  Grammar\n    = ident SuperGrammar? "{" Rule* "}"\n\n  SuperGrammar\n    = "<:" ident\n\n  Rule\n    = ident Formals? ruleDescr? "="  RuleBody  -- define\n    | ident Formals?            ":=" OverrideRuleBody  -- override\n    | ident Formals?            "+=" RuleBody  -- extend\n\n  RuleBody\n    = "|"? NonemptyListOf<TopLevelTerm, "|">\n\n  TopLevelTerm\n    = Seq caseName  -- inline\n    | Seq\n\n  OverrideRuleBody\n    = "|"? NonemptyListOf<OverrideTopLevelTerm, "|">\n\n  OverrideTopLevelTerm\n    = "..."  -- superSplice\n    | TopLevelTerm\n\n  Formals\n    = "<" ListOf<ident, ","> ">"\n\n  Params\n    = "<" ListOf<Seq, ","> ">"\n\n  Alt\n    = NonemptyListOf<Seq, "|">\n\n  Seq\n    = Iter*\n\n  Iter\n    = Pred "*"  -- star\n    | Pred "+"  -- plus\n    | Pred "?"  -- opt\n    | Pred\n\n  Pred\n    = "~" Lex  -- not\n    | "&" Lex  -- lookahead\n    | Lex\n\n  Lex\n    = "#" Base  -- lex\n    | Base\n\n  Base\n    = ident Params? ~(ruleDescr? "=" | ":=" | "+=")  -- application\n    | oneCharTerminal ".." oneCharTerminal           -- range\n    | terminal                                       -- terminal\n    | "(" Alt ")"                                    -- paren\n\n  ruleDescr  (a rule description)\n    = "(" ruleDescrText ")"\n\n  ruleDescrText\n    = (~")" any)*\n\n  caseName\n    = "--" (~"\\n" space)* name (~"\\n" space)* ("\\n" | &"}")\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n  ident  (an identifier)\n    = name\n\n  terminal\n    = "\\"" terminalChar* "\\""\n\n  oneCharTerminal\n    = "\\"" terminalChar "\\""\n\n  terminalChar\n    = escapeChar\n      | ~"\\\\" ~"\\"" ~"\\n" "\\u{0}".."\\u{10FFFF}"\n\n  escapeChar  (an escape sequence)\n    = "\\\\\\\\"                                     -- backslash\n    | "\\\\\\""                                     -- doubleQuote\n    | "\\\\\\\'"                                     -- singleQuote\n    | "\\\\b"                                      -- backspace\n    | "\\\\n"                                      -- lineFeed\n    | "\\\\r"                                      -- carriageReturn\n    | "\\\\t"                                      -- tab\n    | "\\\\u{" hexDigit hexDigit? hexDigit?\n             hexDigit? hexDigit? hexDigit? "}"   -- unicodeCodePoint\n    | "\\\\u" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape\n    | "\\\\x" hexDigit hexDigit                    -- hexEscape\n\n  space\n   += comment\n\n  comment\n    = "//" (~"\\n" any)* &("\\n" | end)  -- singleLine\n    | "/*" (~"*/" any)* "*/"  -- multiLine\n\n  tokens = token*\n\n  token = caseName | comment | ident | operator | punctuation | terminal | any\n\n  operator = "<:" | "=" | ":=" | "+=" | "*" | "+" | "?" | "~" | "&"\n\n  punctuation = "<" | ">" | "," | "--"\n}'},"Ohm",null,"Grammars",{Grammars:["define",{sourceInterval:[9,32]},null,[],["star",{sourceInterval:[24,32]},["app",{sourceInterval:[24,31]},"Grammar",[]]]],Grammar:["define",{sourceInterval:[36,83]},null,[],["seq",{sourceInterval:[50,83]},["app",{sourceInterval:[50,55]},"ident",[]],["opt",{sourceInterval:[56,69]},["app",{sourceInterval:[56,68]},"SuperGrammar",[]]],["terminal",{sourceInterval:[70,73]},"{"],["star",{sourceInterval:[74,79]},["app",{sourceInterval:[74,78]},"Rule",[]]],["terminal",{sourceInterval:[80,83]},"}"]]],SuperGrammar:["define",{sourceInterval:[87,116]},null,[],["seq",{sourceInterval:[106,116]},["terminal",{sourceInterval:[106,110]},"<:"],["app",{sourceInterval:[111,116]},"ident",[]]]],Rule_define:["define",{sourceInterval:[131,181]},null,[],["seq",{sourceInterval:[131,170]},["app",{sourceInterval:[131,136]},"ident",[]],["opt",{sourceInterval:[137,145]},["app",{sourceInterval:[137,144]},"Formals",[]]],["opt",{sourceInterval:[146,156]},["app",{sourceInterval:[146,155]},"ruleDescr",[]]],["terminal",{sourceInterval:[157,160]},"="],["app",{sourceInterval:[162,170]},"RuleBody",[]]]],Rule_override:["define",{sourceInterval:[188,248]},null,[],["seq",{sourceInterval:[188,235]},["app",{sourceInterval:[188,193]},"ident",[]],["opt",{sourceInterval:[194,202]},["app",{sourceInterval:[194,201]},"Formals",[]]],["terminal",{sourceInterval:[214,218]},":="],["app",{sourceInterval:[219,235]},"OverrideRuleBody",[]]]],Rule_extend:["define",{sourceInterval:[255,305]},null,[],["seq",{sourceInterval:[255,294]},["app",{sourceInterval:[255,260]},"ident",[]],["opt",{sourceInterval:[261,269]},["app",{sourceInterval:[261,268]},"Formals",[]]],["terminal",{sourceInterval:[281,285]},"+="],["app",{sourceInterval:[286,294]},"RuleBody",[]]]],Rule:["define",{sourceInterval:[120,305]},null,[],["alt",{sourceInterval:[131,305]},["app",{sourceInterval:[131,170]},"Rule_define",[]],["app",{sourceInterval:[188,235]},"Rule_override",[]],["app",{sourceInterval:[255,294]},"Rule_extend",[]]]],RuleBody:["define",{sourceInterval:[309,362]},null,[],["seq",{sourceInterval:[324,362]},["opt",{sourceInterval:[324,328]},["terminal",{sourceInterval:[324,327]},"|"]],["app",{sourceInterval:[329,362]},"NonemptyListOf",[["app",{sourceInterval:[344,356]},"TopLevelTerm",[]],["terminal",{sourceInterval:[358,361]},"|"]]]]],TopLevelTerm_inline:["define",{sourceInterval:[385,408]},null,[],["seq",{sourceInterval:[385,397]},["app",{sourceInterval:[385,388]},"Seq",[]],["app",{sourceInterval:[389,397]},"caseName",[]]]],TopLevelTerm:["define",{sourceInterval:[366,418]},null,[],["alt",{sourceInterval:[385,418]},["app",{sourceInterval:[385,397]},"TopLevelTerm_inline",[]],["app",{sourceInterval:[415,418]},"Seq",[]]]],OverrideRuleBody:["define",{sourceInterval:[422,491]},null,[],["seq",{sourceInterval:[445,491]},["opt",{sourceInterval:[445,449]},["terminal",{sourceInterval:[445,448]},"|"]],["app",{sourceInterval:[450,491]},"NonemptyListOf",[["app",{sourceInterval:[465,485]},"OverrideTopLevelTerm",[]],["terminal",{sourceInterval:[487,490]},"|"]]]]],OverrideTopLevelTerm_superSplice:["define",{sourceInterval:[522,543]},null,[],["terminal",{sourceInterval:[522,527]},"..."]],OverrideTopLevelTerm:["define",{sourceInterval:[495,562]},null,[],["alt",{sourceInterval:[522,562]},["app",{sourceInterval:[522,527]},"OverrideTopLevelTerm_superSplice",[]],["app",{sourceInterval:[550,562]},"TopLevelTerm",[]]]],Formals:["define",{sourceInterval:[566,606]},null,[],["seq",{sourceInterval:[580,606]},["terminal",{sourceInterval:[580,583]},"<"],["app",{sourceInterval:[584,602]},"ListOf",[["app",{sourceInterval:[591,596]},"ident",[]],["terminal",{sourceInterval:[598,601]},","]]],["terminal",{sourceInterval:[603,606]},">"]]],Params:["define",{sourceInterval:[610,647]},null,[],["seq",{sourceInterval:[623,647]},["terminal",{sourceInterval:[623,626]},"<"],["app",{sourceInterval:[627,643]},"ListOf",[["app",{sourceInterval:[634,637]},"Seq",[]],["terminal",{sourceInterval:[639,642]},","]]],["terminal",{sourceInterval:[644,647]},">"]]],Alt:["define",{sourceInterval:[651,685]},null,[],["app",{sourceInterval:[661,685]},"NonemptyListOf",[["app",{sourceInterval:[676,679]},"Seq",[]],["terminal",{sourceInterval:[681,684]},"|"]]]],Seq:["define",{sourceInterval:[689,704]},null,[],["star",{sourceInterval:[699,704]},["app",{sourceInterval:[699,703]},"Iter",[]]]],Iter_star:["define",{sourceInterval:[719,736]},null,[],["seq",{sourceInterval:[719,727]},["app",{sourceInterval:[719,723]},"Pred",[]],["terminal",{sourceInterval:[724,727]},"*"]]],Iter_plus:["define",{sourceInterval:[743,760]},null,[],["seq",{sourceInterval:[743,751]},["app",{sourceInterval:[743,747]},"Pred",[]],["terminal",{sourceInterval:[748,751]},"+"]]],Iter_opt:["define",{sourceInterval:[767,783]},null,[],["seq",{sourceInterval:[767,775]},["app",{sourceInterval:[767,771]},"Pred",[]],["terminal",{sourceInterval:[772,775]},"?"]]],Iter:["define",{sourceInterval:[708,794]},null,[],["alt",{sourceInterval:[719,794]},["app",{sourceInterval:[719,727]},"Iter_star",[]],["app",{sourceInterval:[743,751]},"Iter_plus",[]],["app",{sourceInterval:[767,775]},"Iter_opt",[]],["app",{sourceInterval:[790,794]},"Pred",[]]]],Pred_not:["define",{sourceInterval:[809,824]},null,[],["seq",{sourceInterval:[809,816]},["terminal",{sourceInterval:[809,812]},"~"],["app",{sourceInterval:[813,816]},"Lex",[]]]],Pred_lookahead:["define",{sourceInterval:[831,852]},null,[],["seq",{sourceInterval:[831,838]},["terminal",{sourceInterval:[831,834]},"&"],["app",{sourceInterval:[835,838]},"Lex",[]]]],Pred:["define",{sourceInterval:[798,862]},null,[],["alt",{sourceInterval:[809,862]},["app",{sourceInterval:[809,816]},"Pred_not",[]],["app",{sourceInterval:[831,838]},"Pred_lookahead",[]],["app",{sourceInterval:[859,862]},"Lex",[]]]],Lex_lex:["define",{sourceInterval:[876,892]},null,[],["seq",{sourceInterval:[876,884]},["terminal",{sourceInterval:[876,879]},"#"],["app",{sourceInterval:[880,884]},"Base",[]]]],Lex:["define",{sourceInterval:[866,903]},null,[],["alt",{sourceInterval:[876,903]},["app",{sourceInterval:[876,884]},"Lex_lex",[]],["app",{sourceInterval:[899,903]},"Base",[]]]],Base_application:["define",{sourceInterval:[918,979]},null,[],["seq",{sourceInterval:[918,963]},["app",{sourceInterval:[918,923]},"ident",[]],["opt",{sourceInterval:[924,931]},["app",{sourceInterval:[924,930]},"Params",[]]],["not",{sourceInterval:[932,963]},["alt",{sourceInterval:[934,962]},["seq",{sourceInterval:[934,948]},["opt",{sourceInterval:[934,944]},["app",{sourceInterval:[934,943]},"ruleDescr",[]]],["terminal",{sourceInterval:[945,948]},"="]],["terminal",{sourceInterval:[951,955]},":="],["terminal",{sourceInterval:[958,962]},"+="]]]]],Base_range:["define",{sourceInterval:[986,1041]},null,[],["seq",{sourceInterval:[986,1022]},["app",{sourceInterval:[986,1001]},"oneCharTerminal",[]],["terminal",{sourceInterval:[1002,1006]},".."],["app",{sourceInterval:[1007,1022]},"oneCharTerminal",[]]]],Base_terminal:["define",{sourceInterval:[1048,1106]},null,[],["app",{sourceInterval:[1048,1056]},"terminal",[]]],Base_paren:["define",{sourceInterval:[1113,1168]},null,[],["seq",{sourceInterval:[1113,1124]},["terminal",{sourceInterval:[1113,1116]},"("],["app",{sourceInterval:[1117,1120]},"Alt",[]],["terminal",{sourceInterval:[1121,1124]},")"]]],Base:["define",{sourceInterval:[907,1168]},null,[],["alt",{sourceInterval:[918,1168]},["app",{sourceInterval:[918,963]},"Base_application",[]],["app",{sourceInterval:[986,1022]},"Base_range",[]],["app",{sourceInterval:[1048,1056]},"Base_terminal",[]],["app",{sourceInterval:[1113,1124]},"Base_paren",[]]]],ruleDescr:["define",{sourceInterval:[1172,1231]},"a rule description",[],["seq",{sourceInterval:[1210,1231]},["terminal",{sourceInterval:[1210,1213]},"("],["app",{sourceInterval:[1214,1227]},"ruleDescrText",[]],["terminal",{sourceInterval:[1228,1231]},")"]]],ruleDescrText:["define",{sourceInterval:[1235,1266]},null,[],["star",{sourceInterval:[1255,1266]},["seq",{sourceInterval:[1256,1264]},["not",{sourceInterval:[1256,1260]},["terminal",{sourceInterval:[1257,1260]},")"]],["app",{sourceInterval:[1261,1264]},"any",[]]]]],caseName:["define",{sourceInterval:[1270,1338]},null,[],["seq",{sourceInterval:[1285,1338]},["terminal",{sourceInterval:[1285,1289]},"--"],["star",{sourceInterval:[1290,1304]},["seq",{sourceInterval:[1291,1302]},["not",{sourceInterval:[1291,1296]},["terminal",{sourceInterval:[1292,1296]},"\n"]],["app",{sourceInterval:[1297,1302]},"space",[]]]],["app",{sourceInterval:[1305,1309]},"name",[]],["star",{sourceInterval:[1310,1324]},["seq",{sourceInterval:[1311,1322]},["not",{sourceInterval:[1311,1316]},["terminal",{sourceInterval:[1312,1316]},"\n"]],["app",{sourceInterval:[1317,1322]},"space",[]]]],["alt",{sourceInterval:[1326,1337]},["terminal",{sourceInterval:[1326,1330]},"\n"],["lookahead",{sourceInterval:[1333,1337]},["terminal",{sourceInterval:[1334,1337]},"}"]]]]],name:["define",{sourceInterval:[1342,1382]},"a name",[],["seq",{sourceInterval:[1363,1382]},["app",{sourceInterval:[1363,1372]},"nameFirst",[]],["star",{sourceInterval:[1373,1382]},["app",{sourceInterval:[1373,1381]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[1386,1418]},null,[],["alt",{sourceInterval:[1402,1418]},["terminal",{sourceInterval:[1402,1405]},"_"],["app",{sourceInterval:[1412,1418]},"letter",[]]]],nameRest:["define",{sourceInterval:[1422,1452]},null,[],["alt",{sourceInterval:[1437,1452]},["terminal",{sourceInterval:[1437,1440]},"_"],["app",{sourceInterval:[1447,1452]},"alnum",[]]]],ident:["define",{sourceInterval:[1456,1489]},"an identifier",[],["app",{sourceInterval:[1485,1489]},"name",[]]],terminal:["define",{sourceInterval:[1493,1531]},null,[],["seq",{sourceInterval:[1508,1531]},["terminal",{sourceInterval:[1508,1512]},'"'],["star",{sourceInterval:[1513,1526]},["app",{sourceInterval:[1513,1525]},"terminalChar",[]]],["terminal",{sourceInterval:[1527,1531]},'"']]],oneCharTerminal:["define",{sourceInterval:[1535,1579]},null,[],["seq",{sourceInterval:[1557,1579]},["terminal",{sourceInterval:[1557,1561]},'"'],["app",{sourceInterval:[1562,1574]},"terminalChar",[]],["terminal",{sourceInterval:[1575,1579]},'"']]],terminalChar:["define",{sourceInterval:[1583,1660]},null,[],["alt",{sourceInterval:[1602,1660]},["app",{sourceInterval:[1602,1612]},"escapeChar",[]],["seq",{sourceInterval:[1621,1660]},["not",{sourceInterval:[1621,1626]},["terminal",{sourceInterval:[1622,1626]},"\\"]],["not",{sourceInterval:[1627,1632]},["terminal",{sourceInterval:[1628,1632]},'"']],["not",{sourceInterval:[1633,1638]},["terminal",{sourceInterval:[1634,1638]},"\n"]],["range",{sourceInterval:[1639,1660]},"\0","\uDBFF\uDFFF"]]]],escapeChar_backslash:["define",{sourceInterval:[1703,1758]},null,[],["terminal",{sourceInterval:[1703,1709]},"\\\\"]],escapeChar_doubleQuote:["define",{sourceInterval:[1765,1822]},null,[],["terminal",{sourceInterval:[1765,1771]},'\\"']],escapeChar_singleQuote:["define",{sourceInterval:[1829,1886]},null,[],["terminal",{sourceInterval:[1829,1835]},"\\'"]],escapeChar_backspace:["define",{sourceInterval:[1893,1948]},null,[],["terminal",{sourceInterval:[1893,1898]},"\\b"]],escapeChar_lineFeed:["define",{sourceInterval:[1955,2009]},null,[],["terminal",{sourceInterval:[1955,1960]},"\\n"]],escapeChar_carriageReturn:["define",{sourceInterval:[2016,2076]},null,[],["terminal",{sourceInterval:[2016,2021]},"\\r"]],escapeChar_tab:["define",{sourceInterval:[2083,2132]},null,[],["terminal",{sourceInterval:[2083,2088]},"\\t"]],escapeChar_unicodeCodePoint:["define",{sourceInterval:[2139,2243]},null,[],["seq",{sourceInterval:[2139,2221]},["terminal",{sourceInterval:[2139,2145]},"\\u{"],["app",{sourceInterval:[2146,2154]},"hexDigit",[]],["opt",{sourceInterval:[2155,2164]},["app",{sourceInterval:[2155,2163]},"hexDigit",[]]],["opt",{sourceInterval:[2165,2174]},["app",{sourceInterval:[2165,2173]},"hexDigit",[]]],["opt",{sourceInterval:[2188,2197]},["app",{sourceInterval:[2188,2196]},"hexDigit",[]]],["opt",{sourceInterval:[2198,2207]},["app",{sourceInterval:[2198,2206]},"hexDigit",[]]],["opt",{sourceInterval:[2208,2217]},["app",{sourceInterval:[2208,2216]},"hexDigit",[]]],["terminal",{sourceInterval:[2218,2221]},"}"]]],escapeChar_unicodeEscape:["define",{sourceInterval:[2250,2309]},null,[],["seq",{sourceInterval:[2250,2291]},["terminal",{sourceInterval:[2250,2255]},"\\u"],["app",{sourceInterval:[2256,2264]},"hexDigit",[]],["app",{sourceInterval:[2265,2273]},"hexDigit",[]],["app",{sourceInterval:[2274,2282]},"hexDigit",[]],["app",{sourceInterval:[2283,2291]},"hexDigit",[]]]],escapeChar_hexEscape:["define",{sourceInterval:[2316,2371]},null,[],["seq",{sourceInterval:[2316,2339]},["terminal",{sourceInterval:[2316,2321]},"\\x"],["app",{sourceInterval:[2322,2330]},"hexDigit",[]],["app",{sourceInterval:[2331,2339]},"hexDigit",[]]]],escapeChar:["define",{sourceInterval:[1664,2371]},"an escape sequence",[],["alt",{sourceInterval:[1703,2371]},["app",{sourceInterval:[1703,1709]},"escapeChar_backslash",[]],["app",{sourceInterval:[1765,1771]},"escapeChar_doubleQuote",[]],["app",{sourceInterval:[1829,1835]},"escapeChar_singleQuote",[]],["app",{sourceInterval:[1893,1898]},"escapeChar_backspace",[]],["app",{sourceInterval:[1955,1960]},"escapeChar_lineFeed",[]],["app",{sourceInterval:[2016,2021]},"escapeChar_carriageReturn",[]],["app",{sourceInterval:[2083,2088]},"escapeChar_tab",[]],["app",{sourceInterval:[2139,2221]},"escapeChar_unicodeCodePoint",[]],["app",{sourceInterval:[2250,2291]},"escapeChar_unicodeEscape",[]],["app",{sourceInterval:[2316,2339]},"escapeChar_hexEscape",[]]]],space:["extend",{sourceInterval:[2375,2394]},null,[],["app",{sourceInterval:[2387,2394]},"comment",[]]],comment_singleLine:["define",{sourceInterval:[2412,2458]},null,[],["seq",{sourceInterval:[2412,2443]},["terminal",{sourceInterval:[2412,2416]},"//"],["star",{sourceInterval:[2417,2429]},["seq",{sourceInterval:[2418,2427]},["not",{sourceInterval:[2418,2423]},["terminal",{sourceInterval:[2419,2423]},"\n"]],["app",{sourceInterval:[2424,2427]},"any",[]]]],["lookahead",{sourceInterval:[2430,2443]},["alt",{sourceInterval:[2432,2442]},["terminal",{sourceInterval:[2432,2436]},"\n"],["app",{sourceInterval:[2439,2442]},"end",[]]]]]],comment_multiLine:["define",{sourceInterval:[2465,2501]},null,[],["seq",{sourceInterval:[2465,2487]},["terminal",{sourceInterval:[2465,2469]},"/*"],["star",{sourceInterval:[2470,2482]},["seq",{sourceInterval:[2471,2480]},["not",{sourceInterval:[2471,2476]},["terminal",{sourceInterval:[2472,2476]},"*/"]],["app",{sourceInterval:[2477,2480]},"any",[]]]],["terminal",{sourceInterval:[2483,2487]},"*/"]]],comment:["define",{sourceInterval:[2398,2501]},null,[],["alt",{sourceInterval:[2412,2501]},["app",{sourceInterval:[2412,2443]},"comment_singleLine",[]],["app",{sourceInterval:[2465,2487]},"comment_multiLine",[]]]],tokens:["define",{sourceInterval:[2505,2520]},null,[],["star",{sourceInterval:[2514,2520]},["app",{sourceInterval:[2514,2519]},"token",[]]]],token:["define",{sourceInterval:[2524,2600]},null,[],["alt",{sourceInterval:[2532,2600]},["app",{sourceInterval:[2532,2540]},"caseName",[]],["app",{sourceInterval:[2543,2550]},"comment",[]],["app",{sourceInterval:[2553,2558]},"ident",[]],["app",{sourceInterval:[2561,2569]},"operator",[]],["app",{sourceInterval:[2572,2583]},"punctuation",[]],["app",{sourceInterval:[2586,2594]},"terminal",[]],["app",{sourceInterval:[2597,2600]},"any",[]]]],operator:["define",{sourceInterval:[2604,2669]},null,[],["alt",{sourceInterval:[2615,2669]},["terminal",{sourceInterval:[2615,2619]},"<:"],["terminal",{sourceInterval:[2622,2625]},"="],["terminal",{sourceInterval:[2628,2632]},":="],["terminal",{sourceInterval:[2635,2639]},"+="],["terminal",{sourceInterval:[2642,2645]},"*"],["terminal",{sourceInterval:[2648,2651]},"+"],["terminal",{sourceInterval:[2654,2657]},"?"],["terminal",{sourceInterval:[2660,2663]},"~"],["terminal",{sourceInterval:[2666,2669]},"&"]]],punctuation:["define",{sourceInterval:[2673,2709]},null,[],["alt",{sourceInterval:[2687,2709]},["terminal",{sourceInterval:[2687,2690]},"<"],["terminal",{sourceInterval:[2693,2696]},">"],["terminal",{sourceInterval:[2699,2702]},","],["terminal",{sourceInterval:[2705,2709]},"--"]]]}]),eB=Object.create(N.prototype);function eU(e,t){for(let r in e)if(r===t)return!0;return!1}let e$=eM(["grammar",{source:'OperationsAndAttributes {\n\n  AttributeSignature =\n    name\n\n  OperationSignature =\n    name Formals?\n\n  Formals\n    = "(" ListOf<name, ","> ")"\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n}'},"OperationsAndAttributes",null,"AttributeSignature",{AttributeSignature:["define",{sourceInterval:[29,58]},null,[],["app",{sourceInterval:[54,58]},"name",[]]],OperationSignature:["define",{sourceInterval:[62,100]},null,[],["seq",{sourceInterval:[87,100]},["app",{sourceInterval:[87,91]},"name",[]],["opt",{sourceInterval:[92,100]},["app",{sourceInterval:[92,99]},"Formals",[]]]]],Formals:["define",{sourceInterval:[104,143]},null,[],["seq",{sourceInterval:[118,143]},["terminal",{sourceInterval:[118,121]},"("],["app",{sourceInterval:[122,139]},"ListOf",[["app",{sourceInterval:[129,133]},"name",[]],["terminal",{sourceInterval:[135,138]},","]]],["terminal",{sourceInterval:[140,143]},")"]]],name:["define",{sourceInterval:[147,187]},"a name",[],["seq",{sourceInterval:[168,187]},["app",{sourceInterval:[168,177]},"nameFirst",[]],["star",{sourceInterval:[178,187]},["app",{sourceInterval:[178,186]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[191,223]},null,[],["alt",{sourceInterval:[207,223]},["terminal",{sourceInterval:[207,210]},"_"],["app",{sourceInterval:[217,223]},"letter",[]]]],nameRest:["define",{sourceInterval:[227,257]},null,[],["alt",{sourceInterval:[242,257]},["terminal",{sourceInterval:[242,245]},"_"],["app",{sourceInterval:[252,257]},"alnum",[]]]]}]);(function(e){let t={empty(){return this.iteration()},nonEmpty(e,t,r){return this.iteration([e].concat(r.children))}};eL.BuiltInSemantics=eL.createSemantics(e,null).addOperation("asIteration",{emptyListOf:t.empty,nonemptyListOf:t.nonEmpty,EmptyListOf:t.empty,NonemptyListOf:t.nonEmpty})})(eT.BuiltInRules),function(e){eL.prototypeGrammarSemantics=e.createSemantics().addOperation("parse",{AttributeSignature:e=>({name:e.parse(),formals:[]}),OperationSignature:(e,t)=>({name:e.parse(),formals:t.children.map(e=>e.parse())[0]||[]}),Formals:(e,t,r)=>t.asIteration().children.map(e=>e.parse()),name(e,t){return this.sourceString}}),eL.prototypeGrammar=e}(e$);let eV="an indented block",ez="a dedent";class eK extends eo{constructor(e){super(e.input),this.state=e}_indentationAt(e){return this.state.userData[e]||0}atEnd(){return super.atEnd()&&0===this._indentationAt(this.pos)}next(){if(0!==this._indentationAt(this.pos)){this.examinedLength=Math.max(this.examinedLength,this.pos);return}return super.next()}nextCharCode(){return 0!==this._indentationAt(this.pos)?(this.examinedLength=Math.max(this.examinedLength,this.pos),1114112):super.nextCharCode()}nextCodePoint(){return 0!==this._indentationAt(this.pos)?(this.examinedLength=Math.max(this.examinedLength,this.pos),1114112):super.nextCodePoint()}}class eH extends N{constructor(e=!0){super(),this.isIndent=e}allowsSkippingPrecedingSpace(){return!0}eval(e){let{inputStream:t}=e,r=e.userData;e.doNotMemoize=!0;let n=t.pos,i=this.isIndent?1:-1;return(r[n]||0)*i>0?(e.userData=Object.create(r),e.userData[n]-=i,e.pushBinding(new ed(0),n),!0):(e.processFailure(n,this),!1)}getArity(){return 1}_assertAllApplicationsAreValid(e,t){}_isNullable(e,t){return!1}assertChoicesHaveUniformArity(e){}assertIteratedExprsAreNotNullable(e){}introduceParams(e){return this}substituteParams(e){return this}toString(){return this.isIndent?"indent":"dedent"}toDisplayString(){return this.toString()}toFailure(e){return new ex(this,this.isIndent?eV:ez,"description")}}let eW=new k(eG,"any",[new $("indent"),new $("dedent")],[]);Object.assign(new ej().newGrammar("IndentationSensitive").withSuperGrammar(eG).define("indent",[],new eH(!0),eV,void 0,!0).define("dedent",[],new eH(!1),ez,void 0,!0).extend("any",[],eW,"any character",void 0).build(),{_matchStateInitializer(e){e.userData=function(e){let t,r=0,n=[0],i=()=>n[n.length-1],s={},a=/( *).*(?:$|\r?\n|\r)/g;for(;null!=(t=a.exec(e));){let[e,a]=t;if(0===e.length)break;let o=a.length,l=i(),u=r+o;if(o>l)n.push(o),s[u]=1;else if(o<l){let e=n.length;for(;i()!==o;)n.pop();s[u]=-1*(e-n.length)}r+=e.length}return n.length>1&&(s[r]=1-n.length),s}(e.input),e.inputStream=new eK(e)},supportsIncrementalParsing:!1}),eT.initApplicationParser(eq,function(e,t,r){let n,i,s,a=new ej,o=!1;return(r||eq).createSemantics().addOperation("visit",{Grammars:e=>e.children.map(e=>e.visit()),Grammar(e,r,i,s,o){let l=e.visit();n=a.newGrammar(l),r.child(0)&&r.child(0).visit(),s.children.map(e=>e.visit());let u=n.build();if(u.source=this.source.trimmed(),eU(t,l))throw z("Grammar "+u.name+" is already declared in this namespace");return t[l]=u,u},SuperGrammar(e,r){let i=r.visit();if("null"===i)n.withSuperGrammar(null);else{if(!t||!eU(t,i))throw z(t?`Grammar ${i} is not declared in namespace '${t}'`:"Undeclared grammar "+i,r.source);n.withSuperGrammar(t[i])}},Rule_define(e,t,r,a,o){i=e.visit(),s=t.children.map(e=>e.visit())[0]||[],n.defaultStartRule||n.ensureSuperGrammar()===eT.ProtoBuiltInRules||n.withDefaultStartRule(i);let l=o.visit(),u=r.children.map(e=>e.visit())[0],c=this.source.trimmed();return n.define(i,s,l,u,c)},Rule_override(e,t,r,a){i=e.visit(),s=t.children.map(e=>e.visit())[0]||[];let l=this.source.trimmed();n.ensureSuperGrammarRuleForOverriding(i,l),o=!0;let u=a.visit();return o=!1,n.override(i,s,u,null,l)},Rule_extend(e,t,r,a){i=e.visit(),s=t.children.map(e=>e.visit())[0]||[];let o=a.visit(),l=this.source.trimmed();return n.extend(i,s,o,null,l)},RuleBody(e,t){return a.alt(...t.visit()).withSource(this.source)},OverrideRuleBody(e,t){let r=t.visit(),s=r.indexOf(eB);if(!(s>=0))return a.alt(...r).withSource(this.source);{let e=r.slice(0,s),t=r.slice(s+1);return t.forEach(e=>{if(e===eB)throw z("'...' can appear at most once in a rule body",e.source)}),new k(n.superGrammar,i,e,t).withSource(this.source)}},Formals:(e,t,r)=>t.visit(),Params:(e,t,r)=>t.visit(),Alt(e){return a.alt(...e.visit()).withSource(this.source)},TopLevelTerm_inline(e,t){let r=i+"_"+t.visit(),l=e.visit(),u=this.source.trimmed(),c=!(n.superGrammar&&n.superGrammar.rules[r]);o&&!c?n.override(r,s,l,null,u):n.define(r,s,l,null,u);let p=s.map(e=>a.app(e));return a.app(r,p).withSource(l.source)},OverrideTopLevelTerm_superSplice:e=>eB,Seq(e){return a.seq(...e.children.map(e=>e.visit())).withSource(this.source)},Iter_star(e,t){return a.star(e.visit()).withSource(this.source)},Iter_plus(e,t){return a.plus(e.visit()).withSource(this.source)},Iter_opt(e,t){return a.opt(e.visit()).withSource(this.source)},Pred_not(e,t){return a.not(t.visit()).withSource(this.source)},Pred_lookahead(e,t){return a.lookahead(t.visit()).withSource(this.source)},Lex_lex(e,t){return a.lex(t.visit()).withSource(this.source)},Base_application(e,t){let r=t.children.map(e=>e.visit())[0]||[];return a.app(e.visit(),r).withSource(this.source)},Base_range(e,t,r){return a.range(e.visit(),r.visit()).withSource(this.source)},Base_terminal(e){return a.terminal(e.visit()).withSource(this.source)},Base_paren:(e,t,r)=>t.visit(),ruleDescr:(e,t,r)=>t.visit(),ruleDescrText(e){return this.sourceString.trim()},caseName:(e,t,r,n,i)=>r.visit(),name(e,t){return this.sourceString},nameFirst(e){},nameRest(e){},terminal:(e,t,r)=>t.children.map(e=>e.visit()).join(""),oneCharTerminal:(e,t,r)=>t.visit(),escapeChar(e){try{return b(this.sourceString)}catch(t){if(t instanceof RangeError&&t.message.startsWith("Invalid code point "))throw function(e){let t=e._node;h(t&&t.isNonterminal()&&"escapeChar_unicodeCodePoint"===t.ctorName);let r=e.children.slice(1,-1).map(e=>e.source),n=r[0].coverageWith(...r.slice(1));return z(`U+${n.contents} is not a valid Unicode code point`,n)}(e);throw t}},NonemptyListOf:(e,t,r)=>[e.visit()].concat(r.children.map(e=>e.visit())),EmptyListOf:()=>[],_terminal(){return this.sourceString}})(e).visit()})}}]);